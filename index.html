<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Генеалогия ИИ: 23 компонента СРТ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;600&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --bg: #0a0a0f;
    --gold: #c9a84c;
    --gold-dim: #8a6d2b;
    --blue: #4a9eff;
    --blue-dim: #2a5a99;
    --text: #e8e4d9;
    --text-dim: #8a8678;
  }
  html { scroll-behavior: smooth; font-size: 120%; }
  body { background: var(--bg); color: var(--text); font-family: 'Cormorant Garamond', Georgia, serif; overflow-x: hidden; }

  .title-screen {
    height: 100vh; display: flex; flex-direction: column;
    justify-content: center; align-items: center; position: relative;
  }
  .title-screen::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(ellipse at center, rgba(201,168,76,0.06) 0%, transparent 70%);
  }
  .title-screen h1 {
    font-size: clamp(2.5rem, 6vw, 4.5rem); font-weight: 700;
    color: var(--gold); text-align: center; letter-spacing: 0.05em;
    opacity: 0; animation: fadeUp 1.5s ease-out 0.3s forwards;
  }
  .title-sub {
    font-size: clamp(1rem, 2.5vw, 1.5rem); color: var(--text-dim);
    margin-top: 1.2rem; font-style: italic; text-align: center;
    opacity: 0; animation: fadeUp 1.5s ease-out 0.8s forwards;
  }
  .title-years {
    font-family: 'JetBrains Mono', monospace; font-size: 1rem;
    color: var(--gold-dim); margin-top: 1.5rem; letter-spacing: 0.3em;
    opacity: 0; animation: fadeUp 1.5s ease-out 1.2s forwards;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .explain-panel {
    max-width: 1000px; margin: 0 auto; padding: 3rem 2rem 2rem;
    opacity: 0; animation: fadeUp 1.5s ease-out 1.5s forwards;
  }
  .explain-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1.5rem; }
  .explain-card { padding: 1.8rem; border-radius: 12px; background: rgba(18,18,26,0.6); }
  .explain-card.func { border: 1px solid var(--gold-dim); }
  .explain-card.infra { border: 1px solid var(--blue-dim); }
  .explain-card h3 { font-size: 1.6rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.6rem; }
  .explain-card.func h3 { color: var(--gold); }
  .explain-card.infra h3 { color: var(--blue); }
  .explain-dot { width: 14px; height: 14px; border-radius: 50%; flex-shrink: 0; }
  .explain-dot.func { background: var(--gold); }
  .explain-dot.infra { background: var(--blue); }
  .explain-card p { color: var(--text-dim); font-size: 1.2rem; line-height: 1.6; margin-bottom: 0.8rem; }
  .explain-card .items { font-family: 'JetBrains Mono', monospace; font-size: 0.88rem; line-height: 1.8; }
  .explain-card.func .items { color: var(--gold-dim); }
  .explain-card.infra .items { color: var(--blue-dim); }

  .scroll-hint { text-align: center; margin-top: 2rem; opacity: 0; animation: fadeUp 1.5s ease-out 2s forwards; }
  .scroll-hint .arrow {
    display: inline-block; width: 24px; height: 24px;
    border-right: 2px solid var(--gold-dim); border-bottom: 2px solid var(--gold-dim);
    transform: rotate(45deg); animation: bounce 2s infinite;
  }
  @keyframes bounce {
    0%,20%,50%,80%,100% { transform: rotate(45deg) translateY(0); }
    40% { transform: rotate(45deg) translateY(-8px); }
    60% { transform: rotate(45deg) translateY(-4px); }
  }

  .section-hdr { text-align: center; padding: 4rem 2rem 1.5rem; max-width: 900px; margin: 0 auto; }
  .section-hdr h2 { font-size: 2.4rem; color: var(--gold); margin-bottom: 0.6rem; }
  .section-hdr p { color: var(--text-dim); font-size: 1.2rem; font-style: italic; }

  .epoch-hdr {
    text-align: center; padding: 3rem 2rem 1rem; max-width: 900px; margin: 0 auto;
    border-top: 1px solid rgba(201,168,76,0.12);
  }
  .epoch-hdr .epoch-num { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: var(--gold-dim); letter-spacing: 0.2em; margin-bottom: 0.4rem; }
  .epoch-hdr h3 { font-size: 1.9rem; color: var(--gold); margin-bottom: 0.3rem; }
  .epoch-hdr .epoch-years { font-family: 'JetBrains Mono', monospace; font-size: 1rem; color: var(--text-dim); letter-spacing: 0.1em; }
  .epoch-hdr .epoch-desc { color: var(--text-dim); font-style: italic; font-size: 1.15rem; margin-top: 0.4rem; }

  .timeline-wrap { padding: 1rem 2rem 4rem; max-width: 1300px; margin: 0 auto; }
  .timeline { position: relative; padding: 1rem 0; }
  .timeline::before {
    content: ''; position: absolute; left: 50%; top: 0; bottom: 0; width: 2px;
    background: linear-gradient(to bottom, transparent, var(--gold-dim), var(--gold), var(--gold-dim), transparent);
    transform: translateX(-50%);
  }

  .tl-node {
    display: flex; align-items: center; margin-bottom: 3.5rem;
    position: relative; opacity: 0; transform: translateY(40px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  .tl-node.visible { opacity: 1; transform: translateY(0); }
  .tl-node:nth-child(odd) { flex-direction: row; }
  .tl-node:nth-child(even) { flex-direction: row-reverse; }

  .tl-img { width: 44%; position: relative; cursor: pointer; }
  .tl-img img { width: 100%; border-radius: 10px; transition: transform 0.4s, box-shadow 0.4s, border-color 0.4s; }
  .tl-img img.func { border: 1px solid var(--gold-dim); }
  .tl-img img.infra { border: 1px solid var(--blue-dim); }
  .tl-img:hover img.func { transform: scale(1.02); box-shadow: 0 0 30px rgba(201,168,76,0.25); border-color: var(--gold); }
  .tl-img:hover img.infra { transform: scale(1.02); box-shadow: 0 0 30px rgba(74,158,255,0.25); border-color: var(--blue); }

  .tl-badge {
    position: absolute; top: -10px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.95rem;
    padding: 4px 14px; border-radius: 16px; font-weight: 600; z-index: 2;
  }
  .tl-badge.func { background: var(--gold); color: var(--bg); }
  .tl-badge.infra { background: var(--blue); color: var(--bg); }
  .tl-node:nth-child(odd) .tl-badge { right: -8px; }
  .tl-node:nth-child(even) .tl-badge { left: -8px; }

  .tl-cat {
    position: absolute; bottom: 8px; left: 8px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
    background: rgba(10,10,15,0.85); padding: 3px 10px; border-radius: 4px; letter-spacing: 0.12em;
  }
  .tl-cat.func { color: var(--gold); border: 1px solid var(--gold-dim); }
  .tl-cat.infra { color: var(--blue); border: 1px solid var(--blue-dim); }

  .tl-dot {
    position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);
    width: 18px; height: 18px; border-radius: 50%; border: 3px solid var(--bg); z-index: 3;
  }
  .tl-dot.func { background: var(--gold); box-shadow: 0 0 12px rgba(201,168,76,0.4); }
  .tl-dot.infra { background: var(--blue); box-shadow: 0 0 12px rgba(74,158,255,0.4); }

  .tl-info { width: 44%; padding: 0 2rem; }
  .tl-info h3 { font-size: 1.8rem; margin-bottom: 0.2rem; line-height: 1.2; }
  .tl-info h3.func { color: var(--gold); }
  .tl-info h3.infra { color: var(--blue); }
  .tl-info .author { font-size: 1.1rem; color: var(--text-dim); font-style: italic; margin-bottom: 0.6rem; }
  .tl-info .fn { font-size: 1.15rem; color: var(--text); line-height: 1.5; padding-left: 0.8rem; margin-bottom: 0.5rem; border-left: 2px solid; }
  .tl-info .fn.func { border-left-color: var(--gold-dim); }
  .tl-info .fn.infra { border-left-color: var(--blue-dim); }
  .tl-info .mg { font-size: 1.1rem; font-style: italic; line-height: 1.5; opacity: 0.8; }
  .tl-info .mg.func { color: #d4a853; }
  .tl-info .mg.infra { color: #6db3ff; }

  .conn-lbl { text-align: center; margin: -1rem 0 1.5rem; position: relative; z-index: 2; }
  .conn-lbl .arr { display: inline-block; width: 0; height: 0; border-left: 7px solid transparent; border-right: 7px solid transparent; border-top: 10px solid var(--gold-dim); margin-bottom: 0.4rem; }
  .conn-lbl p {
    display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;
    color: var(--gold-dim); background: rgba(10,10,15,0.9); padding: 6px 16px;
    border-radius: 16px; border: 1px solid rgba(201,168,76,0.15); max-width: 520px; line-height: 1.4;
  }

  .graph-wrap { padding: 2rem 2rem 5rem; max-width: 1500px; margin: 0 auto; }
  .graph-box {
    position: relative; width: 100%; aspect-ratio: 2/1;
    background: rgba(18,18,26,0.4); border-radius: 14px;
    border: 1px solid rgba(201,168,76,0.12); overflow: visible;
  }
  .row-label {
    position: absolute; left: -10px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.65rem;
    writing-mode: vertical-rl; text-orientation: mixed; letter-spacing: 0.1em;
    padding: 8px 4px; border-radius: 4px;
  }
  .row-label.func { top: 5%; color: var(--gold-dim); background: rgba(201,168,76,0.08); }
  .row-label.infra { top: 55%; color: var(--blue-dim); background: rgba(74,158,255,0.08); }
  .row-sep { position: absolute; left: 1%; right: 1%; top: 46%; height: 1px; background: rgba(255,255,255,0.06); }
  .row-sep-label {
    position: absolute; left: 50%; top: 44%; transform: translateX(-50%);
    font-family: 'JetBrains Mono', monospace; font-size: 0.55rem;
    color: rgba(255,255,255,0.15); letter-spacing: 0.2em; white-space: nowrap;
  }
  .epoch-col-label {
    position: absolute; top: -22px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.55rem;
    color: var(--gold-dim); letter-spacing: 0.1em; white-space: nowrap;
  }
  .epoch-col-sep { position: absolute; top: 0; bottom: 0; width: 1px; background: rgba(201,168,76,0.06); }

  .gn {
    position: absolute; width: 100px; text-align: center;
    cursor: pointer; transition: transform 0.3s; z-index: 2;
  }
  .gn:hover { transform: scale(1.15); z-index: 10; }
  .gn img { width: 95px; height: 57px; object-fit: cover; border-radius: 5px; transition: border-color 0.3s, box-shadow 0.3s; }
  .gn img.func { border: 2px solid var(--gold-dim); }
  .gn img.infra { border: 2px solid var(--blue-dim); }
  .gn:hover img.func { border-color: var(--gold); box-shadow: 0 0 20px rgba(201,168,76,0.4); }
  .gn:hover img.infra { border-color: var(--blue); box-shadow: 0 0 20px rgba(74,158,255,0.4); }
  .gn .gn-t { font-family: 'JetBrains Mono', monospace; font-size: 0.62rem; margin-top: 2px; line-height: 1.2; }
  .gn .gn-t.func { color: var(--gold); }
  .gn .gn-t.infra { color: var(--blue); }
  .gn .gn-y { font-family: 'JetBrains Mono', monospace; font-size: 0.55rem; color: var(--text-dim); }

  .graph-svg { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
  .graph-legend { display: flex; justify-content: center; gap: 2.5rem; margin-top: 1.5rem; }
  .gl-item { display: flex; align-items: center; gap: 0.5rem; font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; }
  .gl-dot { width: 12px; height: 12px; border-radius: 50%; }

  .summary-wrap { max-width: 1100px; margin: 0 auto; padding: 2rem; }
  .summary-table { width: 100%; border-collapse: collapse; font-size: 1rem; font-family: 'JetBrains Mono', monospace; }
  .summary-table th { text-align: left; padding: 0.7rem 1rem; color: var(--gold); border-bottom: 2px solid var(--gold-dim); font-weight: 600; }
  .summary-table td { padding: 0.6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.06); color: var(--text-dim); font-size: 0.92rem; }
  .summary-table tr:hover td { color: var(--text); background: rgba(201,168,76,0.03); }
  .summary-table .ep-row td { color: var(--gold-dim); font-weight: 600; font-size: 0.88rem; border-bottom: 1px solid var(--gold-dim); padding-top: 1.2rem; }
  .badge-sm { display: inline-block; padding: 2px 8px; border-radius: 8px; font-size: 0.78rem; }
  .badge-sm.func { background: rgba(201,168,76,0.15); color: var(--gold); }
  .badge-sm.infra { background: rgba(74,158,255,0.15); color: var(--blue); }

  .modal {
    display: none; position: fixed; inset: 0;
    background: rgba(0,0,0,0.92); z-index: 1000;
    justify-content: center; align-items: center; padding: 2rem; cursor: pointer;
  }
  .modal.on { display: flex; }
  .modal-inner { max-width: 950px; max-height: 90vh; cursor: default; overflow-y: auto; }
  .modal-inner img { width: 100%; border-radius: 10px; border: 2px solid var(--gold); }
  .modal-meta { text-align: center; margin-top: 0.8rem; }
  .modal-meta h3 { color: var(--gold); font-size: 1.7rem; }
  .modal-meta p { color: var(--text-dim); font-size: 1.1rem; }
  .modal-srt { margin-top: 1.2rem; padding: 1.4rem 2rem; background: rgba(201,168,76,0.06); border-left: 4px solid var(--gold-dim); border-radius: 0 8px 8px 0; text-align: left; max-width: 850px; margin-left: auto; margin-right: auto; }
  .modal-srt .srt-label { font-family: 'JetBrains Mono', monospace; font-size: 1rem; color: var(--gold-dim); letter-spacing: 0.15em; margin-bottom: 0.5rem; }
  .modal-srt .srt-text { font-size: 1.25rem; font-style: italic; color: var(--text-dim); line-height: 1.7; }

  .limits-wrap { max-width: 1200px; margin: 0 auto; padding: 2rem; }
  .limits-table { width: 100%; border-collapse: collapse; font-family: 'Cormorant Garamond', Georgia, serif; }
  .limits-table th {
    text-align: left; padding: 0.8rem 1.2rem; font-size: 1.1rem; font-weight: 600;
    color: var(--gold); border-bottom: 2px solid var(--gold-dim);
    font-family: 'JetBrains Mono', monospace; letter-spacing: 0.05em;
  }
  .limits-table td {
    padding: 0.8rem 1.2rem; font-size: 1.05rem; line-height: 1.5;
    border-bottom: 1px solid rgba(255,255,255,0.06); color: var(--text-dim);
    vertical-align: top;
  }
  .limits-table tr:hover td { color: var(--text); background: rgba(201,168,76,0.03); }
  .limits-table td:first-child { color: var(--text); font-weight: 600; width: 28%; }
  .limits-table td:nth-child(2) { width: 36%; }
  .limits-table td:nth-child(3) { font-style: italic; }
  .limits-table .limits-warn { color: #e8a44c; }

  .footer {
    text-align: center; padding: 3rem 2rem; color: var(--text-dim); font-size: 1rem;
    border-top: 1px solid rgba(201,168,76,0.08);
  }
  .footer .yr { font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--gold); letter-spacing: 0.2em; margin-bottom: 0.4rem; }
  .footer .st { font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; margin-top: 0.6rem; }

  @media (max-width: 900px) {
    .tl-node, .tl-node:nth-child(odd), .tl-node:nth-child(even) { flex-direction: column; }
    .tl-img, .tl-info { width: 90%; }
    .tl-info { padding: 1rem 0 0; }
    .timeline::before { left: 20px; }
    .tl-dot { left: 20px; }
    .explain-grid { grid-template-columns: 1fr; }
  }

  /* === Narrative Bridge === */
  .narrative-bridge {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
    padding: 2rem 2rem 1rem;
    font-size: 1.2rem;
    color: var(--text-dim);
    font-style: italic;
    line-height: 1.7;
    border-top: 1px solid rgba(201,168,76,0.08);
  }

  /* ============================================================
     SECTION 2: Evolution of the concept "machine"
     ============================================================ */

  .evol-hdr {
    padding-top: 5rem;
    padding-bottom: 2rem;
  }

  .stairs-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 1rem 2rem 3rem;
  }

  .stair {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
  }

  .stair.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .stair-1 { margin-left: 0; }
  .stair-2 { margin-left: 4rem; }
  .stair-3 { margin-left: 8rem; }
  .stair-4 { margin-left: 12rem; }
  .stair-5 { margin-left: 16rem; }

  .stair-inner {
    display: flex;
    gap: 2rem;
    align-items: flex-start;
    padding: 1.8rem 2rem;
    border-left: 3px solid var(--gold-dim);
    background: rgba(18, 18, 26, 0.4);
    border-radius: 0 12px 12px 0;
    transition: background 0.3s, border-color 0.3s;
  }

  .stair-inner:hover {
    background: rgba(18, 18, 26, 0.65);
    border-left-color: var(--gold);
  }

  .stair-visual {
    flex-shrink: 0;
    width: 160px;
  }

  .stair-visual img {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid var(--gold-dim);
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .stair-inner:hover .stair-visual img {
    border-color: var(--gold);
    box-shadow: 0 0 20px rgba(201, 168, 76, 0.2);
  }

  .stair-content {
    flex: 1;
    min-width: 0;
  }

  .stair-numeral {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--gold-dim);
    letter-spacing: 0.15em;
    margin-bottom: 0.2rem;
  }

  .stair-title {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.7rem;
    font-weight: 700;
    color: var(--gold);
    margin-bottom: 0.15rem;
    line-height: 1.2;
  }

  .stair-era {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--text-dim);
    letter-spacing: 0.1em;
    margin-bottom: 0.7rem;
  }

  .stair-definition {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.15rem;
    color: var(--text);
    line-height: 1.55;
    margin-bottom: 0.8rem;
  }

  .stair-examples {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.8rem;
  }

  .stair-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--gold);
    background: rgba(201, 168, 76, 0.08);
    padding: 4px 14px;
    border-radius: 12px;
    border: 1px solid rgba(201, 168, 76, 0.15);
    white-space: nowrap;
    transition: background 0.3s, border-color 0.3s;
  }

  .stair-inner:hover .stair-badge {
    background: rgba(201, 168, 76, 0.14);
    border-color: rgba(201, 168, 76, 0.3);
  }

  .stair-insight {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.1rem;
    font-style: italic;
    color: var(--text-dim);
    padding-left: 0.8rem;
    border-left: 2px solid var(--gold-dim);
    line-height: 1.5;
  }

  .stair-transition {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.8rem 0 0.8rem 1.5rem;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .stair-transition.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .stair-transition[data-step="1.5"] { margin-left: 2rem; }
  .stair-transition[data-step="2.5"] { margin-left: 6rem; }
  .stair-transition[data-step="3.5"] { margin-left: 10rem; }
  .stair-transition[data-step="4.5"] { margin-left: 14rem; }

  .stair-transition-line {
    width: 30px;
    height: 2px;
    background: linear-gradient(to right, var(--gold-dim), transparent);
    flex-shrink: 0;
  }

  .stair-transition-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    color: var(--gold-dim);
    letter-spacing: 0.06em;
    white-space: nowrap;
  }

  .evol-formula {
    max-width: 1100px;
    margin: 2rem auto 3rem;
    padding: 0 2rem;
    text-align: center;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .evol-formula.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .evol-formula-inner {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    padding: 1.2rem 2.5rem;
    background: rgba(18, 18, 26, 0.6);
    border: 1px solid rgba(201, 168, 76, 0.15);
    border-radius: 16px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .evol-formula-step {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1rem;
    color: var(--text-dim);
    padding: 4px 12px;
    border-radius: 8px;
    transition: color 0.3s, background 0.3s;
  }

  .evol-formula-step.active {
    color: var(--gold);
    background: rgba(201, 168, 76, 0.12);
    font-weight: 600;
  }

  .evol-formula-arrow {
    font-size: 1.1rem;
    color: var(--gold-dim);
  }

  .evol-formula-caption {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1rem;
    color: var(--text-dim);
    font-style: italic;
    margin-top: 0.8rem;
  }

  @media (max-width: 900px) {
    .stair-1, .stair-2, .stair-3, .stair-4, .stair-5 { margin-left: 0; }
    .stair-transition[data-step="1.5"],
    .stair-transition[data-step="2.5"],
    .stair-transition[data-step="3.5"],
    .stair-transition[data-step="4.5"] { margin-left: 0; }
    .stair-inner { flex-direction: column; padding: 1.4rem 1.2rem; }
    .stair-visual { width: 100%; }
    .stair-visual img { width: 100%; height: 140px; }
    .stairs-container { padding: 1rem 1rem 2rem; }
    .evol-formula-inner { padding: 1rem 1.2rem; gap: 0.4rem; }
    .evol-formula-step { font-size: 0.85rem; padding: 3px 8px; }
  }

  @media (max-width: 600px) {
    .stair-title { font-size: 1.4rem; }
    .stair-definition { font-size: 1.05rem; }
    .stair-badge { font-size: 0.78rem; padding: 3px 10px; }
  }

  /* ============================================================
     SECTION 4: Communication Chain
     ============================================================ */

  .comm-chain-section {
    padding: 2rem 2rem 5rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  .comm-chain-wrap {
    overflow-x: auto;
    padding: 2rem 0;
    -webkit-overflow-scrolling: touch;
  }

  .comm-chain {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: center;
    gap: 0;
    min-width: min-content;
    padding: 1rem 2rem;
  }

  .comm-node {
    width: 200px;
    min-width: 200px;
    background: rgba(18, 18, 26, 0.6);
    border: 1px solid rgba(201, 168, 76, 0.15);
    border-radius: 12px;
    padding: 0;
    cursor: pointer;
    transition: border-color 0.4s, box-shadow 0.4s, transform 0.4s;
    position: relative;
    opacity: 0;
    transform: translateX(-30px);
  }

  .comm-node.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .comm-node:hover {
    border-color: var(--gold);
    box-shadow: 0 0 24px rgba(201, 168, 76, 0.15);
    transform: translateY(-4px);
  }

  .comm-node.visible:hover {
    transform: translateX(0) translateY(-4px);
  }

  .comm-node.expanded {
    border-color: var(--gold);
    box-shadow: 0 0 30px rgba(201, 168, 76, 0.2);
  }

  .comm-node-img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 11px 11px 0 0;
    display: block;
  }

  .comm-node-body {
    padding: 0.8rem 1rem 1rem;
  }

  .comm-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    padding: 3px 10px;
    border-radius: 10px;
    margin-bottom: 0.5rem;
  }

  .comm-badge.encoding { background: rgba(201,168,76,0.2); color: var(--gold); }
  .comm-badge.network { background: rgba(74,158,255,0.2); color: var(--blue); }
  .comm-badge.binary { background: rgba(168,130,255,0.2); color: #a882ff; }
  .comm-badge.formalization { background: rgba(76,201,168,0.2); color: #4cc9a8; }
  .comm-badge.decoding { background: rgba(255,130,100,0.2); color: #ff8264; }

  .comm-node-title {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--gold);
    margin-bottom: 0.15rem;
    line-height: 1.2;
  }

  .comm-node-year {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    color: var(--text-dim);
    margin-bottom: 0.4rem;
  }

  .comm-node-brief {
    font-size: 0.95rem;
    color: var(--text-dim);
    line-height: 1.4;
    font-style: italic;
  }

  .comm-desc {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.4s ease,
                padding 0.4s ease;
    opacity: 0;
    padding: 0 1rem;
    background: rgba(201, 168, 76, 0.03);
    border-top: 1px solid rgba(201, 168, 76, 0.08);
    border-radius: 0 0 11px 11px;
  }

  .comm-node.expanded .comm-desc {
    max-height: 300px;
    opacity: 1;
    padding: 0.8rem 1rem 1rem;
  }

  .comm-desc p {
    font-size: 0.95rem;
    color: var(--text);
    line-height: 1.6;
  }

  .comm-expand-hint {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--gold-dim);
    text-align: center;
    margin-top: 0.5rem;
    transition: opacity 0.3s;
  }

  .comm-node.expanded .comm-expand-hint {
    opacity: 0.4;
  }

  .comm-arrow {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 80px;
    padding: 0 0.2rem;
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
    align-self: center;
  }

  .comm-arrow.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .comm-arrow-line {
    width: 50px;
    height: 2px;
    background: linear-gradient(to right, var(--gold-dim), var(--gold));
    position: relative;
  }

  .comm-arrow-line::after {
    content: '';
    position: absolute;
    right: -2px;
    top: 50%;
    transform: translateY(-50%);
    width: 0; height: 0;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 8px solid var(--gold);
  }

  .comm-arrow-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--gold-dim);
    text-align: center;
    margin-top: 0.4rem;
    line-height: 1.3;
    max-width: 90px;
    letter-spacing: 0.03em;
  }

  .comm-thesis {
    margin-top: 3rem;
    padding: 2rem 2.5rem;
    background: rgba(18, 18, 26, 0.6);
    border: 1px solid rgba(201, 168, 76, 0.15);
    border-radius: 12px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .comm-thesis.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .comm-thesis-diagram {
    text-align: center;
    margin-bottom: 1.2rem;
    padding-bottom: 1.2rem;
    border-bottom: 1px solid rgba(201, 168, 76, 0.1);
  }

  .comm-thesis-diagram .shannon-chain {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .shannon-block {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    padding: 4px 12px;
    border-radius: 6px;
    font-weight: 600;
  }

  .shannon-block.source { background: rgba(201,168,76,0.15); color: var(--gold); }
  .shannon-block.encoder { background: rgba(168,130,255,0.15); color: #a882ff; }
  .shannon-block.channel { background: rgba(74,158,255,0.15); color: var(--blue); }
  .shannon-block.decoder { background: rgba(255,130,100,0.15); color: #ff8264; }
  .shannon-block.receiver { background: rgba(76,201,168,0.15); color: #4cc9a8; }

  .shannon-arr {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    color: var(--gold-dim);
  }

  .comm-thesis-text {
    font-size: 1.2rem;
    color: var(--text);
    line-height: 1.7;
    text-align: center;
    font-style: italic;
  }

  .comm-thesis-text strong {
    color: var(--gold);
    font-weight: 600;
  }

  @media (max-width: 1100px) {
    .comm-chain {
      flex-direction: column;
      align-items: center;
      padding: 1rem;
    }
    .comm-node {
      width: 320px;
      min-width: unset;
      max-width: 90vw;
      transform: translateY(30px);
    }
    .comm-node.visible { transform: translateY(0); }
    .comm-node.visible:hover { transform: translateY(-4px); }
    .comm-arrow {
      transform: rotate(90deg) translateX(-10px);
      min-width: unset;
      min-height: 50px;
    }
    .comm-arrow.visible { transform: rotate(90deg) translateX(0); }
    .comm-node-img { height: 160px; }
  }

  @media (max-width: 500px) {
    .comm-node { width: 95vw; }
    .comm-thesis { padding: 1.5rem; }
    .comm-thesis-text { font-size: 1.05rem; }
    .shannon-block { font-size: 0.7rem; padding: 3px 8px; }
  }

  /* ============================================================
     SECTION 1: Three Programs of AI
     ============================================================ */

  .programs-section {
    max-width: 1100px;
    margin: 0 auto;
    padding: 2rem;
  }

  .programs-intro {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 2.5rem;
    font-size: 1.2rem;
    color: var(--text-dim);
    line-height: 1.7;
  }

  .programs-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2rem;
    margin-top: 2rem;
  }

  .program-card {
    padding: 2rem;
    border-radius: 12px;
    background: rgba(18,18,26,0.6);
    border: 1px solid rgba(201,168,76,0.15);
    cursor: pointer;
    transition: border-color 0.4s, box-shadow 0.4s, transform 0.3s;
    opacity: 0;
    transform: translateY(40px);
  }

  .program-card.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .program-card:nth-child(1) { transition-delay: 0s; }
  .program-card:nth-child(2) { transition-delay: 0.15s; }
  .program-card:nth-child(3) { transition-delay: 0.3s; }

  .program-card:hover {
    border-color: var(--gold);
    box-shadow: 0 0 30px rgba(201,168,76,0.15);
  }

  .program-card.expanded {
    border-color: var(--gold);
    box-shadow: 0 0 40px rgba(201,168,76,0.12);
  }

  .program-card-img {
    width: 100%;
    border-radius: 8px;
    margin-bottom: 1.2rem;
    border: 1px solid rgba(201,168,76,0.12);
    transition: border-color 0.4s, box-shadow 0.4s;
  }

  .program-card:hover .program-card-img,
  .program-card.expanded .program-card-img {
    border-color: var(--gold-dim);
    box-shadow: 0 0 20px rgba(201,168,76,0.1);
  }

  .program-icon {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2rem;
    color: var(--gold);
    line-height: 1;
    margin-bottom: 0.6rem;
    display: block;
  }

  .program-name {
    font-size: 1.5rem;
    color: var(--gold);
    font-weight: 700;
    margin: 0.5rem 0 0.2rem;
    line-height: 1.2;
  }

  .program-subtitle {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    color: var(--gold-dim);
    letter-spacing: 0.15em;
    margin-bottom: 0.8rem;
  }

  .program-brief {
    font-size: 1.15rem;
    color: var(--text-dim);
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .expand-hint {
    text-align: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    color: var(--text-dim);
    opacity: 0.5;
    margin-top: 0.5rem;
    transition: opacity 0.3s;
  }

  .program-card.expanded .expand-hint {
    opacity: 0;
    height: 0;
    margin: 0;
    overflow: hidden;
  }

  .program-detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.6s ease;
  }

  .program-card.expanded .program-detail {
    max-height: 800px;
  }

  .program-detail ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .program-detail ul li {
    padding: 0.5rem 0 0.5rem 1rem;
    border-left: 2px solid var(--gold-dim);
    margin-bottom: 0.5rem;
    font-size: 1.05rem;
    color: var(--text-dim);
    line-height: 1.5;
  }

  .program-detail ul li strong {
    color: var(--text);
  }

  .program-schema {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--gold-dim);
    padding: 6px 12px;
    background: rgba(201,168,76,0.06);
    border-radius: 6px;
    display: inline-block;
    margin-top: 0.8rem;
  }

  .program-formula {
    font-style: italic;
    font-size: 1.1rem;
    color: var(--text);
    margin-top: 1rem;
    padding-top: 0.8rem;
    border-top: 1px solid rgba(201,168,76,0.1);
  }

  .programs-contrast-wrap {
    max-width: 1100px;
    margin: 3rem auto 0;
    padding: 0 2rem;
  }

  .programs-contrast-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    color: var(--gold-dim);
    letter-spacing: 0.15em;
    text-align: center;
    margin-bottom: 1.2rem;
  }

  .programs-table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Cormorant Garamond', Georgia, serif;
  }

  .programs-table th {
    text-align: left;
    padding: 0.8rem 1.2rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--gold);
    border-bottom: 2px solid var(--gold-dim);
    font-family: 'JetBrains Mono', monospace;
    letter-spacing: 0.05em;
  }

  .programs-table td {
    padding: 0.8rem 1.2rem;
    font-size: 1.05rem;
    line-height: 1.5;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    color: var(--text-dim);
    vertical-align: top;
  }

  .programs-table tr:hover td {
    color: var(--text);
    background: rgba(201,168,76,0.03);
  }

  .programs-table td:first-child {
    color: var(--text);
    font-weight: 600;
    width: 18%;
  }

  .programs-quote {
    max-width: 850px;
    margin: 3rem auto 2rem;
    padding: 1.4rem 2rem;
    background: rgba(201,168,76,0.06);
    border-left: 4px solid var(--gold-dim);
    border-radius: 0 8px 8px 0;
    text-align: left;
  }

  .programs-quote p {
    font-size: 1.2rem;
    font-style: italic;
    color: var(--text-dim);
    line-height: 1.7;
  }

  .programs-quote .quote-src {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--gold-dim);
    margin-top: 0.8rem;
    font-style: normal;
  }

  @media (max-width: 900px) {
    .programs-grid { grid-template-columns: 1fr; }
    .programs-table { font-size: 0.95rem; }
    .programs-table th, .programs-table td { padding: 0.6rem 0.8rem; }
    .programs-quote { margin: 2rem 1rem; padding: 1rem 1.2rem; }
  }

  @media (max-width: 600px) {
    .programs-section { padding: 1rem; }
    .program-name { font-size: 1.3rem; }
    .programs-table td:first-child { width: auto; }
  }

  /* ============================================================
     SECTION 5: Scheme of Mental Activity (MD)
     ============================================================ */

  .md-wrap {
    max-width: 1100px;
    margin: 0 auto;
    padding: 2rem;
  }

  .md-intro {
    text-align: center;
    max-width: 850px;
    margin: 0 auto 3rem;
  }

  .md-intro p {
    font-size: 1.25rem;
    color: var(--text-dim);
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .md-hero-img {
    width: 100%;
    max-width: 680px;
    border-radius: 12px;
    margin: 0 auto;
    display: block;
    border: 1px solid rgba(201,168,76,0.15);
    opacity: 0.85;
    transition: opacity 0.4s;
  }

  .md-hero-img:hover { opacity: 1; }

  .md-diagram {
    display: flex;
    align-items: stretch;
    gap: 0;
    margin: 2rem 0 3rem;
  }

  .md-arrows-left, .md-arrows-right {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 60px;
    flex-shrink: 0;
    position: relative;
  }

  .md-arrows-left::before, .md-arrows-right::before {
    content: '';
    position: absolute;
    top: 10%;
    bottom: 10%;
    width: 2px;
  }

  .md-arrows-left::before {
    background: linear-gradient(to top, rgba(74,158,255,0.2), rgba(160,120,200,0.4), rgba(201,168,76,0.6));
  }

  .md-arrows-right::before {
    background: linear-gradient(to bottom, rgba(201,168,76,0.2), rgba(160,120,200,0.4), rgba(74,158,255,0.6));
  }

  .md-arrows-left::after {
    content: '';
    position: absolute;
    top: 6%;
    width: 0; height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 10px solid rgba(201,168,76,0.6);
  }

  .md-arrows-right::after {
    content: '';
    position: absolute;
    bottom: 6%;
    width: 0; height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 10px solid rgba(74,158,255,0.6);
  }

  .md-arrow-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    color: var(--text-dim);
    writing-mode: vertical-lr;
    text-orientation: mixed;
    letter-spacing: 0.1em;
    opacity: 0.7;
  }

  .md-arrows-left .md-arrow-label { transform: rotate(180deg); }

  .md-layers {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
  }

  .md-layer {
    display: grid;
    grid-template-columns: 80px 1fr 220px;
    gap: 1.2rem;
    align-items: start;
    padding: 1.6rem 1.8rem;
    border-radius: 12px;
    border: 1px solid transparent;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease, border-color 0.4s, box-shadow 0.4s;
  }

  .md-layer.visible { opacity: 1; transform: translateY(0); }

  .md-layer:nth-child(3).visible { transition-delay: 0s; }
  .md-layer:nth-child(2).visible { transition-delay: 0.4s; }
  .md-layer:nth-child(1).visible { transition-delay: 0.8s; }

  .md-thinking { background: rgba(201,168,76,0.08); border-color: rgba(201,168,76,0.25); }
  .md-thinking:hover { border-color: rgba(201,168,76,0.45); box-shadow: 0 0 30px rgba(201,168,76,0.1); }
  .md-comm { background: rgba(160,120,200,0.06); border-color: rgba(160,120,200,0.2); }
  .md-comm:hover { border-color: rgba(160,120,200,0.4); box-shadow: 0 0 30px rgba(160,120,200,0.1); }
  .md-action { background: rgba(74,158,255,0.06); border-color: rgba(74,158,255,0.2); }
  .md-action:hover { border-color: rgba(74,158,255,0.4); box-shadow: 0 0 30px rgba(74,158,255,0.1); }

  .md-layer-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 2.5rem;
    font-weight: 600;
    line-height: 1;
    align-self: center;
    text-align: center;
  }

  .md-thinking .md-layer-label { color: var(--gold); }
  .md-comm .md-layer-label { color: #a078c8; }
  .md-action .md-layer-label { color: var(--blue); }

  .md-layer-body { min-width: 0; }

  .md-layer-title {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 0.4rem;
    line-height: 1.3;
  }

  .md-thinking .md-layer-title { color: var(--gold); }
  .md-comm .md-layer-title { color: #b090d0; }
  .md-action .md-layer-title { color: var(--blue); }

  .md-layer-def {
    font-size: 1.1rem;
    color: var(--text-dim);
    line-height: 1.6;
    margin-bottom: 0.6rem;
  }

  .md-layer-program {
    font-size: 1.05rem;
    color: var(--text-dim);
    line-height: 1.5;
    margin-bottom: 0.4rem;
  }

  .md-program-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    margin-right: 0.3rem;
  }

  .md-thinking .md-program-tag { color: var(--gold-dim); }
  .md-comm .md-program-tag { color: #8a6cb8; }
  .md-action .md-program-tag { color: var(--blue-dim); }

  .md-layer-status {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    letter-spacing: 0.05em;
    margin-top: 0.5rem;
    padding: 4px 10px;
    border-radius: 4px;
    display: inline-block;
  }

  .md-thinking .md-layer-status { color: var(--gold); background: rgba(201,168,76,0.1); }
  .md-comm .md-layer-status { color: #b090d0; background: rgba(160,120,200,0.1); }
  .md-action .md-layer-status { color: var(--blue); background: rgba(74,158,255,0.1); }

  .md-layer-tech {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    align-content: start;
    align-self: center;
  }

  .md-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    padding: 4px 10px;
    border-radius: 6px;
    letter-spacing: 0.03em;
    white-space: nowrap;
    line-height: 1.4;
  }

  .md-badge-gold { color: var(--gold); background: rgba(201,168,76,0.1); border: 1px solid rgba(201,168,76,0.2); }
  .md-badge-purple { color: #b090d0; background: rgba(160,120,200,0.1); border: 1px solid rgba(160,120,200,0.2); }
  .md-badge-blue { color: var(--blue); background: rgba(74,158,255,0.1); border: 1px solid rgba(74,158,255,0.2); }

  .md-partial { font-size: 0.7rem; opacity: 0.6; }

  .md-quote {
    max-width: 850px;
    margin: 2rem auto;
    padding: 1.4rem 2rem;
    background: rgba(201,168,76,0.06);
    border-left: 4px solid var(--gold-dim);
    border-radius: 0 8px 8px 0;
  }

  .md-quote p { font-size: 1.2rem; font-style: italic; color: var(--text-dim); line-height: 1.7; }

  .md-quote-src {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--gold-dim);
    margin-top: 0.8rem;
  }

  .md-conclusion {
    max-width: 850px;
    margin: 0 auto 2rem;
    text-align: center;
    padding: 1.5rem 2rem;
  }

  .md-conclusion p { font-size: 1.3rem; color: var(--text); line-height: 1.7; }

  @media (max-width: 900px) {
    .md-layer { grid-template-columns: 60px 1fr; gap: 0.8rem; }
    .md-layer-tech { grid-column: 1 / -1; margin-top: 0.3rem; }
    .md-layer-label { font-size: 2rem; }
    .md-arrows-left, .md-arrows-right { display: none; }
    .md-diagram { margin: 1.5rem 0 2rem; }
    .md-quote { margin: 1.5rem 1rem; padding: 1rem 1.2rem; }
  }

  @media (max-width: 600px) {
    .md-wrap { padding: 1rem; }
    .md-layer { grid-template-columns: 1fr; text-align: center; padding: 1.2rem; }
    .md-layer-label { font-size: 1.8rem; }
    .md-layer-title { font-size: 1.2rem; }
    .md-layer-tech { justify-content: center; }
    .md-conclusion p { font-size: 1.1rem; }
    .md-intro p { font-size: 1.1rem; }
  }

  /* ============================================================
     SECTION 3: Weak Link Principle
     ============================================================ */

  .weaklink-intro {
    max-width: 900px;
    margin: 0 auto 2.5rem;
    text-align: center;
  }
  .weaklink-intro h3 { font-size: 2rem; color: var(--gold); margin-bottom: 0.6rem; font-weight: 700; }
  .weaklink-intro .wl-subtitle { font-size: 1.15rem; color: var(--text-dim); font-style: italic; line-height: 1.6; max-width: 700px; margin: 0 auto; }
  .weaklink-intro .wl-hero-img { width: 100%; max-width: 600px; border-radius: 12px; margin: 1.5rem auto 0; display: block; border: 1px solid rgba(201,168,76,0.15); opacity: 0.85; transition: opacity 0.4s; }
  .weaklink-intro .wl-hero-img:hover { opacity: 1; }

  .chain-wrap { max-width: 1100px; margin: 0 auto 3rem; display: flex; flex-direction: column; gap: 3rem; }

  .chain-example { background: rgba(18,18,26,0.5); border: 1px solid rgba(201,168,76,0.1); border-radius: 14px; padding: 2rem 2rem 1.6rem; opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease, transform 0.8s ease; }
  .chain-example.visible { opacity: 1; transform: translateY(0); }
  .chain-example .chain-title { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--gold-dim); letter-spacing: 0.15em; margin-bottom: 1.2rem; text-transform: uppercase; }

  .chain-row { display: flex; align-items: center; justify-content: center; gap: 0; flex-wrap: nowrap; margin-bottom: 1.2rem; }

  .chain-node { display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; transition: transform 0.3s; flex-shrink: 0; width: 100px; }
  .chain-node:hover { transform: scale(1.1); z-index: 2; }
  .chain-node img { width: 70px; height: 44px; object-fit: cover; border-radius: 8px; border: 2px solid var(--gold-dim); transition: border-color 0.3s, box-shadow 0.3s; }
  .chain-node:hover img { border-color: var(--gold); box-shadow: 0 0 16px rgba(201,168,76,0.35); }
  .chain-node img.infra { border-color: var(--blue-dim); }
  .chain-node:hover img.infra { border-color: var(--blue); box-shadow: 0 0 16px rgba(74,158,255,0.35); }

  .chain-node.weak-link img { border-color: #e8a44c; box-shadow: 0 0 10px rgba(232,164,76,0.25); }
  .chain-node.weak-link:hover img { border-color: #f0b060; box-shadow: 0 0 20px rgba(232,164,76,0.45); }
  .chain-node.new-constraint img { border: 2px dashed #e8a44c; }
  .chain-node.new-constraint:hover img { border-color: #f0b060; box-shadow: 0 0 16px rgba(232,164,76,0.35); }

  .chain-node .cn-label { font-family: 'JetBrains Mono', monospace; font-size: 0.68rem; margin-top: 4px; line-height: 1.2; color: var(--text-dim); max-width: 90px; }
  .chain-node.weak-link .cn-label { color: #e8a44c; }

  .chain-arrow { display: flex; flex-direction: column; align-items: center; justify-content: center; flex-shrink: 0; width: 60px; position: relative; }
  .chain-arrow::before { content: ''; display: block; width: 36px; height: 2px; background: var(--gold-dim); }
  .chain-arrow::after { content: ''; display: block; width: 0; height: 0; border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-left: 8px solid var(--gold-dim); position: absolute; right: 8px; top: 50%; transform: translateY(-50%); }
  .chain-arrow .chain-arrow-label { font-family: 'JetBrains Mono', monospace; font-size: 0.58rem; color: var(--gold-dim); position: absolute; top: -14px; white-space: nowrap; letter-spacing: 0.05em; }

  .chain-explain { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 0.5rem; }
  .chain-explain-item { padding: 0.8rem 1rem; border-radius: 8px; font-size: 0.95rem; line-height: 1.5; color: var(--text-dim); }
  .chain-explain-item.weak { background: rgba(232,164,76,0.06); border: 1px solid rgba(232,164,76,0.15); }
  .chain-explain-item.weak .ce-tag { color: #e8a44c; }
  .chain-explain-item.answer { background: rgba(74,158,255,0.06); border: 1px solid rgba(74,158,255,0.15); }
  .chain-explain-item.answer .ce-tag { color: var(--blue); }
  .chain-explain-item.next { background: rgba(232,164,76,0.04); border: 1px dashed rgba(232,164,76,0.2); }
  .chain-explain-item.next .ce-tag { color: #e8a44c; font-style: italic; }
  .chain-explain-item .ce-tag { font-family: 'JetBrains Mono', monospace; font-size: 0.72rem; letter-spacing: 0.1em; margin-bottom: 0.3rem; text-transform: uppercase; }

  .weaklink-bridge { max-width: 900px; margin: 0 auto; text-align: center; padding: 1.5rem 2rem; font-size: 1.15rem; color: var(--text-dim); font-style: italic; line-height: 1.7; }

  @media (max-width: 900px) {
    .chain-row { flex-direction: column; gap: 0.5rem; }
    .chain-arrow { width: auto; height: 30px; transform: rotate(90deg); }
    .chain-explain { grid-template-columns: 1fr; }
    .chain-node { width: auto; }
    .weaklink-intro h3 { font-size: 1.6rem; }
  }

</style>
</head>
<body>

<div class="title-screen">
  <h1>Генеалогия<br>Искусственного Разума</h1>
  <p class="title-sub">23 физических компонента Системы Разделения Труда,<br>без которых ИИ был бы невозможен</p>
  <p class="title-years">1642 — 2026</p>
</div>

<div class="explain-panel">
  <div class="explain-grid">
    <div class="explain-card func">
      <h3><span class="explain-dot func"></span> Функциональные компоненты</h3>
      <p>Делают новую вычислительную операцию. Каждый — концептуальный прорыв: новый способ обработки информации, которого раньше не существовало.</p>
      <div class="items">
        Паскалина → Машина Бэббиджа → Перфокарта →<br>
        Реле → Триод → Шеннон → Нейрон →<br>
        Backprop → CNN → ReLU →<br>
        Self-Attention → RLHF
      </div>
    </div>
    <div class="explain-card infra">
      <h3><span class="explain-dot infra"></span> Обеспечивающие компоненты</h3>
      <p>Сами не вычисляют, но без них функциональные компоненты физически невозможны. Невидимый фундамент: точность, измерение, материалы, энергия, данные, инфраструктура.</p>
      <div class="items">
        Концевые меры → Осциллограф → Вакуумный насос →<br>
        Энергосеть → Мультиметр →<br>
        Компиляторы → Фотолитография →<br>
        CUDA → Big Data → HBM → Облачные фермы
      </div>
    </div>
  </div>
  <div class="scroll-hint"><div class="arrow"></div></div>
</div>

<!-- === Section 2: Evolution of the concept "machine" === -->

<div class="section-hdr evol-hdr">
  <h2>Эволюция понятия &laquo;машина&raquo;</h2>
  <p>5 ступеней &mdash; от усиления силы к обучению</p>
</div>

<div class="stairs-container">

  <!-- Stair I -->
  <div class="stair stair-1" data-step="1">
    <div class="stair-inner">
      <div class="stair-visual">
        <img src="img/evol_1_force.jpg" alt="Машина силы" loading="lazy">
      </div>
      <div class="stair-content">
        <div class="stair-numeral">I</div>
        <h3 class="stair-title">Машина силы</h3>
        <div class="stair-era">Античность</div>
        <p class="stair-definition">Устройство, преобразующее и&nbsp;усиливающее мускульное усилие. Машина = умножитель&nbsp;силы.</p>
        <div class="stair-examples">
          <span class="stair-badge">Рычаг</span>
          <span class="stair-badge">Ворот</span>
          <span class="stair-badge">Полиспаст</span>
        </div>
        <p class="stair-insight">&laquo;Впервые сила отделяется от&nbsp;тела&raquo;</p>
      </div>
    </div>
  </div>

  <div class="stair-transition" data-step="1.5">
    <div class="stair-transition-line"></div>
    <p class="stair-transition-text">Нужна кинематика</p>
  </div>

  <!-- Stair II -->
  <div class="stair stair-2" data-step="2">
    <div class="stair-inner">
      <div class="stair-visual">
        <img src="img/evol_2_movement.jpg" alt="Машина движения" loading="lazy">
      </div>
      <div class="stair-content">
        <div class="stair-numeral">II</div>
        <h3 class="stair-title">Машина движения</h3>
        <div class="stair-era">XVIII век, Монж</div>
        <p class="stair-definition">Механизм, преобразующий одно движение в&nbsp;другое. Неважно, что&nbsp;именно крутит колесо &mdash; важна передача.</p>
        <div class="stair-examples">
          <span class="stair-badge">Паровая машина</span>
          <span class="stair-badge">Зубчатые передачи</span>
          <span class="stair-badge">Кинематические пары</span>
        </div>
        <p class="stair-insight">&laquo;Неважно что&nbsp;крутит колесо&raquo;</p>
      </div>
    </div>
  </div>

  <div class="stair-transition" data-step="2.5">
    <div class="stair-transition-line"></div>
    <p class="stair-transition-text">Нужна программа</p>
  </div>

  <!-- Stair III -->
  <div class="stair stair-3" data-step="3">
    <div class="stair-inner">
      <div class="stair-visual">
        <img src="img/evol_3_operations.jpg" alt="Машина операций" loading="lazy">
      </div>
      <div class="stair-content">
        <div class="stair-numeral">III</div>
        <h3 class="stair-title">Машина операций</h3>
        <div class="stair-era">1800&ndash;1840-е, Жаккард, Бэббидж</div>
        <p class="stair-definition">Устройство, выполняющее последовательность шагов по&nbsp;заданной программе. Перфокарта отделяет замысел от&nbsp;исполнения.</p>
        <div class="stair-examples">
          <span class="stair-badge">Перфокарты</span>
          <span class="stair-badge">Станок Жаккарда</span>
          <span class="stair-badge">Аналитическая машина</span>
        </div>
        <p class="stair-insight">&laquo;Машина замещает внимание и&nbsp;выбор&raquo;</p>
      </div>
    </div>
  </div>

  <div class="stair-transition" data-step="3.5">
    <div class="stair-transition-line"></div>
    <p class="stair-transition-text">Координация остается человеческой</p>
  </div>

  <!-- Stair IV -->
  <div class="stair stair-4" data-step="4">
    <div class="stair-inner">
      <div class="stair-visual">
        <img src="img/evol_4_communication.jpg" alt="Машина коммуникации" loading="lazy">
      </div>
      <div class="stair-content">
        <div class="stair-numeral">IV</div>
        <h3 class="stair-title">Машина коммуникации</h3>
        <div class="stair-era">XIX&ndash;XX вв., Морзе, Шеннон</div>
        <p class="stair-definition">Система, передающая и&nbsp;кодирующая информацию. Сигнал отделяется от&nbsp;физического носителя.</p>
        <div class="stair-examples">
          <span class="stair-badge">Телеграф</span>
          <span class="stair-badge">Код Морзе</span>
          <span class="stair-badge">Теория информации</span>
        </div>
        <p class="stair-insight">&laquo;Информация отделяется от&nbsp;носителя&raquo;</p>
      </div>
    </div>
  </div>

  <div class="stair-transition" data-step="4.5">
    <div class="stair-transition-line"></div>
    <p class="stair-transition-text">Нужна самонастройка</p>
  </div>

  <!-- Stair V -->
  <div class="stair stair-5" data-step="5">
    <div class="stair-inner">
      <div class="stair-visual">
        <img src="img/evol_5_learning.jpg" alt="Машина обучения" loading="lazy">
      </div>
      <div class="stair-content">
        <div class="stair-numeral">V</div>
        <h3 class="stair-title">Машина обучения</h3>
        <div class="stair-era">1958+, Розенблатт</div>
        <p class="stair-definition">Система, модифицирующая собственное поведение на&nbsp;основе обратной связи. Перцептрон &mdash; первый шаг от&nbsp;исполнителя к&nbsp;ученику.</p>
        <div class="stair-examples">
          <span class="stair-badge">Перцептрон</span>
          <span class="stair-badge">Backpropagation</span>
          <span class="stair-badge">Нейронные сети</span>
        </div>
        <p class="stair-insight">&laquo;Переход от&nbsp;исполнителя к&nbsp;ученику&raquo;</p>
      </div>
    </div>
  </div>

</div>

<!-- Evolution formula -->
<div class="evol-formula">
  <div class="evol-formula-inner">
    <span class="evol-formula-step">Сил</span>
    <span class="evol-formula-arrow">&rarr;</span>
    <span class="evol-formula-step">Движений</span>
    <span class="evol-formula-arrow">&rarr;</span>
    <span class="evol-formula-step">Операций</span>
    <span class="evol-formula-arrow">&rarr;</span>
    <span class="evol-formula-step">Коммуникации</span>
    <span class="evol-formula-arrow">&rarr;</span>
    <span class="evol-formula-step active">Обучения</span>
  </div>
  <p class="evol-formula-caption">Преобразование сил &rarr; движений &rarr; операций &rarr; коммуникации &rarr; обучения</p>
</div>

<!-- End Section 2 -->

<!-- Narrative bridge: Evolution -> Chronology -->
<div class="narrative-bridge">
  Пять ступеней эволюции машины проявились в конкретных изобретениях. Ниже — хронология 23 физических артефактов, сгруппированных в 6 эпох.
</div>

<div class="section-hdr">
  <h2>Хронология</h2>
  <p>6 эпох эволюции — от латунных шестерней до когнитивных архитектур</p>
</div>

<div class="timeline-wrap"><div class="timeline">

    </div></div>
    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 1</div>
      <h3>Механика вычислений</h3>
      <div class="epoch-years">1642 — 1840-е</div>
      <div class="epoch-desc">От латунных шестерней к символьному программированию</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="pascaline">
      <div class="tl-img" onclick="openM('pascaline')">
        <span class="tl-badge func">1642</span>
        <img class="func" src="img/pascaline.jpg" alt="Паскалина" loading="lazy">
        <span class="tl-cat func">ВЫЧИСЛЕНИЕ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Паскалина</h3>
        <p class="author">Блез Паскаль, 1642</p>
        <p class="fn func">Механизация переноса разряда при сложении</p>
        <p class="mg func">Мышление впервые отделяется от человека и воплощается в геометрии зубьев</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Геометрия зубьев позволила создать архитектуру вычислений</p></div>

    <div class="tl-node" data-id="engine">
      <div class="tl-img" onclick="openM('engine')">
        <span class="tl-badge func">1830-е</span>
        <img class="func" src="img/engine.jpg" alt="Аналитическая машина" loading="lazy">
        <span class="tl-cat func">АРХИТЕКТУРА</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Аналитическая машина</h3>
        <p class="author">Чарльз Бэббидж, 1830-е</p>
        <p class="fn func">Первое разделение хранения данных (Склад) и вычислений (Мельница)</p>
        <p class="mg func">Машина становится системой управления данными — архитектура CPU + Память</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Машине потребовался язык команд — символьный скачок</p></div>

    <div class="tl-node" data-id="punchcard">
      <div class="tl-img" onclick="openM('punchcard')">
        <span class="tl-badge func">1840-е</span>
        <img class="func" src="img/punchcard.jpg" alt="Перфокарта Лавлейс" loading="lazy">
        <span class="tl-cat func">ПРОГРАММА</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Перфокарта Лавлейс</h3>
        <p class="author">Ада Лавлейс, 1840-е</p>
        <p class="fn func">Кодирование алгоритмических команд: циклы и переходы</p>
        <p class="mg func">Символьный скачок — машина работает не с цифрами, а с символами по правилам логики</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Архитектура требует точности — каждая деталь Бэббиджа была уникальной</p></div>

    </div></div>
    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 2</div>
      <h3>Электрическая эра</h3>
      <div class="epoch-years">кон. XIX в. — 1920-е</div>
      <div class="epoch-desc">Точность, электроника и невидимая инфраструктура</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="gauge">
      <div class="tl-img" onclick="openM('gauge')">
        <span class="tl-badge infra">кон. XIX в.</span>
        <img class="infra" src="img/gauge.jpg" alt="Концевые меры и микрометр" loading="lazy">
        <span class="tl-cat infra">ТОЧНОСТЬ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Концевые меры и микрометр</h3>
        <p class="author">К. Э. Иогансон, кон. XIX в.</p>
        <p class="fn infra">Стандарты точности до микрона — взаимозаменяемые детали</p>
        <p class="mg infra">Каждая деталь Бэббиджа была уникальной. Теперь можно собирать машины из стандартных частей</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Точные детали позволили строить надёжные электромеханические устройства</p></div>

    <div class="tl-node" data-id="relay">
      <div class="tl-img" onclick="openM('relay')">
        <span class="tl-badge func">1889</span>
        <img class="func" src="img/relay.jpg" alt="Электромеханическое реле" loading="lazy">
        <span class="tl-cat func">ПЕРЕКЛЮЧЕНИЕ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Электромеханическое реле</h3>
        <p class="author">Элмон Строуджер, 1889</p>
        <p class="fn func">Автоматическая коммутация без участия человека</p>
        <p class="mg func">Физическое воплощение логического выбора — материальное ДА или НЕТ</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Электричество невидимо — инженеру нужны «глаза»</p></div>

    <div class="tl-node" data-id="oscilloscope">
      <div class="tl-img" onclick="openM('oscilloscope')">
        <span class="tl-badge infra">1897</span>
        <img class="infra" src="img/oscilloscope.jpg" alt="Осциллограф" loading="lazy">
        <span class="tl-cat infra">ИЗМЕРЕНИЕ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Осциллограф</h3>
        <p class="author">Карл Ф. Браун, 1897</p>
        <p class="fn infra">Визуализация формы электрического сигнала</p>
        <p class="mg infra">«Глаза» инженера — без него вы не видите, что происходит внутри провода</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Лампа требует вакуума и сверхчистых материалов</p></div>

    <div class="tl-node" data-id="vacuum_pump">
      <div class="tl-img" onclick="openM('vacuum_pump')">
        <span class="tl-badge infra">нач. XX в.</span>
        <img class="infra" src="img/vacuum_pump.jpg" alt="Вакуумный насос" loading="lazy">
        <span class="tl-cat infra">МАТЕРИАЛЫ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Вакуумный насос</h3>
        <p class="author">Химическая промышленность, нач. XX в.</p>
        <p class="fn infra">Глубокий вакуум + сверхчистые металлы (99.99%)</p>
        <p class="mg infra">Без вакуума и чистого вольфрама лампа не работает. Путь к кремнию и полупроводникам</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Вакуум + чистота + точность = электронный переключатель</p></div>

    <div class="tl-node" data-id="triode">
      <div class="tl-img" onclick="openM('triode')">
        <span class="tl-badge func">1906</span>
        <img class="func" src="img/triode.jpg" alt="Вакуумный триод" loading="lazy">
        <span class="tl-cat func">ЭЛЕКТРОНИКА</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Вакуумный триод</h3>
        <p class="author">Ли де Форест, 1906</p>
        <p class="fn func">Управление потоком электронов в вакууме</p>
        <p class="mg func">Безынерционное реле — переключение 0/1 в миллионы раз быстрее механики</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Тысячи ламп требуют стабильного питания 24/7</p></div>

    <div class="tl-node" data-id="powergrid">
      <div class="tl-img" onclick="openM('powergrid')">
        <span class="tl-badge infra">1920-е</span>
        <img class="infra" src="img/powergrid.jpg" alt="Энергосеть" loading="lazy">
        <span class="tl-cat infra">ЭНЕРГИЯ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Энергосеть</h3>
        <p class="author">Индустриализация, 1920-е</p>
        <p class="fn infra">Стабильный ток 24/7 для тысяч вакуумных ламп</p>
        <p class="mg infra">Без стабильной энергосети компьютер постоянно забывал бы результаты из-за скачков напряжения</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>18 000 ламп — нужна мгновенная диагностика каждой</p></div>

    <div class="tl-node" data-id="multimeter">
      <div class="tl-img" onclick="openM('multimeter')">
        <span class="tl-badge infra">1920-е</span>
        <img class="infra" src="img/multimeter.jpg" alt="Мультиметр" loading="lazy">
        <span class="tl-cat infra">ДИАГНОСТИКА</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Мультиметр</h3>
        <p class="author">Индустрия диагностики, 1920-е</p>
        <p class="fn infra">Мгновенная проверка каждой из 18 000 ламп ЭНИАКа</p>
        <p class="mg infra">Без инструментов поиска «битого» узла система из тысяч элементов нежизнеспособна</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Железо готово — нужен формальный язык логики</p></div>

    </div></div>

<!-- Narrative bridge: Epoch 2 -> Communication Chain -->
<div class="narrative-bridge">
  Прежде чем логика получит электронное тело, стоит проследить параллельную линию — как машина шаг за шагом забирала у человека функции коммуникации: кодирование, передачу и, наконец, декодирование.
</div>

<!-- === Section 4: Communication Chain === -->

<div class="section-hdr" style="border-top: 1px solid rgba(201,168,76,0.12); padding-top: 5rem;">
  <h2>Коммуникационная цепочка</h2>
  <p>Как машина шаг за шагом забирала функции кодирования и декодирования</p>
</div>

<div class="comm-chain-section">
  <div class="comm-chain-wrap">
    <div class="comm-chain">

      <!-- Node 1: Signal Flags -->
      <div class="comm-node" onclick="toggleComm(this)">
        <img class="comm-node-img" src="img/comm_flags.jpg" alt="Сигнальные флаги" loading="lazy">
        <div class="comm-node-body">
          <span class="comm-badge encoding">КОДИРОВАНИЕ</span>
          <div class="comm-node-title">Сигнальные флаги</div>
          <div class="comm-node-year">XVII-XVIII вв.</div>
          <p class="comm-node-brief">Визуальное кодирование команд</p>
          <div class="comm-expand-hint">[ click ]</div>
        </div>
        <div class="comm-desc">
          <p>Живая речь заменена операциями со знаками. Первая мануфактуризация речи: команда разбита на элементарные символы, каждый из которых однозначно читается на расстоянии. Сигнальные книги — первые таблицы кодирования команд.</p>
        </div>
      </div>

      <!-- Arrow 1-2 -->
      <div class="comm-arrow">
        <div class="comm-arrow-line"></div>
        <div class="comm-arrow-text">знак становится<br>ретранслируемым</div>
      </div>

      <!-- Node 2: Optical Telegraph -->
      <div class="comm-node" onclick="toggleComm(this)">
        <img class="comm-node-img" src="img/comm_semaphore.jpg" alt="Оптический телеграф" loading="lazy">
        <div class="comm-node-body">
          <span class="comm-badge network">СЕТЬ</span>
          <div class="comm-node-title">Оптический телеграф</div>
          <div class="comm-node-year">1794, Шапп</div>
          <p class="comm-node-brief">Сетевая ретрансляция</p>
          <div class="comm-expand-hint">[ click ]</div>
        </div>
        <div class="comm-desc">
          <p>Цепочка башен с подвижными планками: 196 различных положений. Оператор — функциональный узел, не знающий содержания сообщения. Впервые передача отделена от понимания. Рождение сети как инфраструктуры.</p>
        </div>
      </div>

      <!-- Arrow 2-3 -->
      <div class="comm-arrow">
        <div class="comm-arrow-line"></div>
        <div class="comm-arrow-text">пространство<br>заменено временем</div>
      </div>

      <!-- Node 3: Morse Code -->
      <div class="comm-node" onclick="toggleComm(this)">
        <img class="comm-node-img" src="img/comm_morse.jpg" alt="Азбука Морзе" loading="lazy">
        <div class="comm-node-body">
          <span class="comm-badge binary">БИНАРНОСТЬ</span>
          <div class="comm-node-title">Азбука Морзе</div>
          <div class="comm-node-year">1838</div>
          <p class="comm-node-brief">Бинарное кодирование временем</p>
          <div class="comm-expand-hint">[ click ]</div>
        </div>
        <div class="comm-desc">
          <p>Один провод, два состояния: точка и тире. Вместо пространственных конфигураций — временные последовательности. Рождение бинарности: любое сообщение кодируется двумя символами. Предвестник цифровой эры.</p>
        </div>
      </div>

      <!-- Arrow 3-4 -->
      <div class="comm-arrow">
        <div class="comm-arrow-line"></div>
        <div class="comm-arrow-text">от практики<br>к теории</div>
      </div>

      <!-- Node 4: Shannon -->
      <div class="comm-node" onclick="toggleComm(this)">
        <img class="comm-node-img" src="img/comm_shannon.jpg" alt="Теория информации Шеннона" loading="lazy">
        <div class="comm-node-body">
          <span class="comm-badge formalization">ФОРМАЛИЗАЦИЯ</span>
          <div class="comm-node-title">Теория Шеннона</div>
          <div class="comm-node-year">1948</div>
          <p class="comm-node-brief">Бит как мера защиты от хаоса</p>
          <div class="comm-expand-hint">[ click ]</div>
        </div>
        <div class="comm-desc">
          <p>Энтропия измерена, шум побеждается кодированием. Схема Источник &rarr; Кодер &rarr; Канал &rarr; Декодер &rarr; Приёмник — универсальная модель любой коммуникации. Информация отделена от смысла и стала измеримой величиной.</p>
        </div>
      </div>

      <!-- Arrow 4-5 -->
      <div class="comm-arrow">
        <div class="comm-arrow-line"></div>
        <div class="comm-arrow-text">машина берёт<br>декодирование</div>
      </div>

      <!-- Node 5: Perceptron -->
      <div class="comm-node" onclick="toggleComm(this)">
        <img class="comm-node-img" src="img/comm_perceptron.jpg" alt="Перцептрон" loading="lazy">
        <div class="comm-node-body">
          <span class="comm-badge decoding">ДЕКОДИРОВАНИЕ</span>
          <div class="comm-node-title">Перцептрон</div>
          <div class="comm-node-year">1957, Розенблатт</div>
          <p class="comm-node-brief">Машинное распознавание паттернов</p>
          <div class="comm-expand-hint">[ click ]</div>
        </div>
        <div class="comm-desc">
          <p>Веса вместо жёсткой логики. Машина Mark-1 берёт на себя декодирование — функцию, бывшую исключительно человеческой. Впервые машина не просто передаёт сигнал, а извлекает из него смысл.</p>
        </div>
      </div>

    </div><!-- .comm-chain -->
  </div><!-- .comm-chain-wrap -->

  <!-- Thesis -->
  <div class="comm-thesis">
    <div class="comm-thesis-diagram">
      <div class="shannon-chain">
        <span class="shannon-block source">Источник</span>
        <span class="shannon-arr">&rarr;</span>
        <span class="shannon-block encoder">Кодер</span>
        <span class="shannon-arr">&rarr;</span>
        <span class="shannon-block channel">Канал</span>
        <span class="shannon-arr">&rarr;</span>
        <span class="shannon-block decoder">Декодер</span>
        <span class="shannon-arr">&rarr;</span>
        <span class="shannon-block receiver">Приёмник</span>
      </div>
    </div>
    <p class="comm-thesis-text">
      На каждом историческом этапе машина берёт на себя <strong>всё большую часть цепочки</strong>:
      сначала кодирование, затем передачу, потом формализацию,
      и наконец — <strong>декодирование</strong>, то есть извлечение смысла.
    </p>
  </div>

</div><!-- .comm-chain-section -->

<!-- Narrative bridge: Communication Chain -> Epoch 3 -->
<div class="narrative-bridge">
  Коммуникационная цепочка привела к формализации информации. Теперь вернёмся к хронологии: именно в этот момент Шеннон даёт математике электронное тело.
</div>

<!-- End Section 4 -->

    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 3</div>
      <h3>Математическое основание</h3>
      <div class="epoch-years">1938 — 1943</div>
      <div class="epoch-desc">Логика получает электронное тело</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="shannon">
      <div class="tl-img" onclick="openM('shannon')">
        <span class="tl-badge func">1938</span>
        <img class="func" src="img/shannon.jpg" alt="Схемы Шеннона" loading="lazy">
        <span class="tl-cat func">ЛОГИКА</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Схемы Шеннона</h3>
        <p class="author">Клод Шеннон, 1938</p>
        <p class="fn func">Доказательство: булева логика = электрические цепи</p>
        <p class="mg func">Математика получила электронное тело</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Язык + Железо = среда для нейросетей</p></div>

    <div class="tl-node" data-id="neuron">
      <div class="tl-img" onclick="openM('neuron')">
        <span class="tl-badge func">1943</span>
        <img class="func" src="img/neuron.jpg" alt="Математический нейрон" loading="lazy">
        <span class="tl-cat func">СЕТЬ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Математический нейрон</h3>
        <p class="author">Мак-Каллок & Питтс, 1943</p>
        <p class="fn func">Моделирование клетки мозга через сеть логических реле</p>
        <p class="mg func">Мышление — не одна формула, а результат работы сети простых переключателей</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Разрыв после перцептрона: нужны новые технологические слои</p></div>

    </div></div>
    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 4</div>
      <h3>Полупроводниковая революция</h3>
      <div class="epoch-years">1960-е — 1986</div>
      <div class="epoch-desc">От штучных ламп к массовому производству интеллектуального материала</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="compiler">
      <div class="tl-img" onclick="openM('compiler')">
        <span class="tl-badge infra">1960-е</span>
        <img class="infra" src="img/compiler.jpg" alt="Компиляторы и ЯВУ" loading="lazy">
        <span class="tl-cat infra">АБСТРАКЦИЯ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Компиляторы и ЯВУ</h3>
        <p class="author">Грейс Хоппер, Деннис Ритчи, 1960-е</p>
        <p class="fn infra">Отделение математики нейросетей от железа. Описание архитектуры кодом, не регистрами</p>
        <p class="mg infra">Математика абстрагировалась от машины — можно думать на языке задачи, а не процессора</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Миллионы транзисторов на чипе = среда для многослойных сетей</p></div>

    <div class="tl-node" data-id="photolithography">
      <div class="tl-img" onclick="openM('photolithography')">
        <span class="tl-badge infra">1970-е</span>
        <img class="infra" src="img/photolithography.jpg" alt="Фотолитография" loading="lazy">
        <span class="tl-cat infra">ПРОИЗВОДСТВО</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Фотолитография</h3>
        <p class="author">ASML и предшественники, 1970-е</p>
        <p class="fn infra">Печать миллионов транзисторов на одном кристалле через длину волны света</p>
        <p class="mg infra">Если для Бэббиджа пределом был микрометр, то здесь предел — длина волны света</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Цепное правило: обучение больше не ограничено одним слоём</p></div>

    <div class="tl-node" data-id="backprop">
      <div class="tl-img" onclick="openM('backprop')">
        <span class="tl-badge func">1986</span>
        <img class="func" src="img/backprop.jpg" alt="Backpropagation" loading="lazy">
        <span class="tl-cat func">ОПТИМИЗАЦИЯ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Backpropagation</h3>
        <p class="author">Хинтон, Румельхарт, Уильямс, 1986</p>
        <p class="fn func">Цепное правило для поиска градиента ошибки через все слои сети</p>
        <p class="mg func">Один нейрон не решает XOR. Backprop позволил обучать неограниченное количество слоёв</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Свёртка делает нейрон чувствительным к пространству</p></div>

    </div></div>
    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 5</div>
      <h3>Параллелизм и геометрия</h3>
      <div class="epoch-years">1998 — 2012</div>
      <div class="epoch-desc">Универсальные вычисления разделяются на CPU и GPU</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="cnn">
      <div class="tl-img" onclick="openM('cnn')">
        <span class="tl-badge func">1998</span>
        <img class="func" src="img/cnn.jpg" alt="Свёртка (CNN)" loading="lazy">
        <span class="tl-cat func">ПРОСТРАНСТВО</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Свёртка (CNN)</h3>
        <p class="author">Ян ЛеКун, 1998</p>
        <p class="fn func">Операция свёртки (f*g)(t) — инвариантность к сдвигу через локальные ядра</p>
        <p class="mg func">Нейрон стал работать не со всей картинкой, а с локальными признаками</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Простота убивает сложность — градиент перестаёт затухать</p></div>

    <div class="tl-node" data-id="relu">
      <div class="tl-img" onclick="openM('relu')">
        <span class="tl-badge func">~2010</span>
        <img class="func" src="img/relu.jpg" alt="ReLU" loading="lazy">
        <span class="tl-cat func">АКТИВАЦИЯ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">ReLU</h3>
        <p class="author">Нэйр, Хинтон, ~2010</p>
        <p class="fn func">f(x) = max(0, x) — замена сложных экспонент на простой перегиб</p>
        <p class="mg func">Убрал проблему затухающего градиента. Простота радикально ускорила вычисления</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Параллельные вычисления: GPU = тысячи нейронов одновременно</p></div>

    <div class="tl-node" data-id="cuda">
      <div class="tl-img" onclick="openM('cuda')">
        <span class="tl-badge infra">2006</span>
        <img class="infra" src="img/cuda.jpg" alt="NVIDIA CUDA" loading="lazy">
        <span class="tl-cat infra">ПАРАЛЛЕЛИЗМ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">NVIDIA CUDA</h3>
        <p class="author">NVIDIA, 2006</p>
        <p class="fn infra">Видеокарта как массивный параллельный калькулятор для линейной алгебры</p>
        <p class="mg infra">«Инструмент измерения» нового типа — CUDA превратила GPU в суперкомпьютер для матриц</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Без данных математика глубокого обучения не имеет смысла</p></div>

    <div class="tl-node" data-id="bigdata">
      <div class="tl-img" onclick="openM('bigdata')">
        <span class="tl-badge infra">2000-е</span>
        <img class="infra" src="img/bigdata.jpg" alt="Интернет и Big Data" loading="lazy">
        <span class="tl-cat infra">ДАННЫЕ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Интернет и Big Data</h3>
        <p class="author">Web 2.0, 2000-е</p>
        <p class="fn infra">Создание среды данных — миллиарды изображений, текстов, взаимодействий</p>
        <p class="mg infra">В 1920-х вакуумный насос создавал среду для электронов. Интернет создал среду для обучения</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Отказ от последовательности: каждое слово видит каждое другое</p></div>

    </div></div>
    <div class="epoch-hdr">
      <div class="epoch-num">ЭПОХА 6</div>
      <h3>Эпоха внимания</h3>
      <div class="epoch-years">2017 — 2026</div>
      <div class="epoch-desc">Когнитивные архитектуры и предельная специализация</div>
    </div>
    <div class="timeline-wrap"><div class="timeline">

    <div class="tl-node" data-id="attention">
      <div class="tl-img" onclick="openM('attention')">
        <span class="tl-badge func">2017</span>
        <img class="func" src="img/attention.jpg" alt="Self-Attention" loading="lazy">
        <span class="tl-cat func">ВНИМАНИЕ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">Self-Attention</h3>
        <p class="author">Васвани и др., 2017</p>
        <p class="fn func">Attention(Q,K,V) = softmax(QK^T / sqrt(d_k)) V — отказ от последовательной обработки</p>
        <p class="mg func">Каждое слово видит каждое другое слово одновременно. Параллелизм на уровне математики</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Модель учится не предсказывать, а рассуждать</p></div>

    <div class="tl-node" data-id="rlhf">
      <div class="tl-img" onclick="openM('rlhf')">
        <span class="tl-badge func">2022</span>
        <img class="func" src="img/rlhf.jpg" alt="RLHF" loading="lazy">
        <span class="tl-cat func">РАССУЖДЕНИЕ</span>
      </div>
      <div class="tl-dot func"></div>
      <div class="tl-info">
        <h3 class="func">RLHF</h3>
        <p class="author">OpenAI, Anthropic, 2022</p>
        <p class="fn func">Обучение через обратную связь от человека — оптимизация «полезности», а не предсказания</p>
        <p class="mg func">Модель учится не просто предсказывать следующее слово, а быть полезной</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Без быстрой памяти вычислительная мощь бесполезна</p></div>

    <div class="tl-node" data-id="hbm">
      <div class="tl-img" onclick="openM('hbm')">
        <span class="tl-badge infra">2010-е</span>
        <img class="infra" src="img/hbm.jpg" alt="HBM память" loading="lazy">
        <span class="tl-cat infra">ПРОПУСКНАЯ СПОСОБНОСТЬ</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">HBM память</h3>
        <p class="author">SK Hynix, Samsung, 2010-е</p>
        <p class="fn infra">Сверхбыстрая стопка памяти — данные успевают долетать до ядер GPU</p>
        <p class="mg infra">Более узкое место в СРТ, чем сами чипы. Без HBM вычислительная мощь бесполезна</p>
      </div>
    </div>

    <div class="conn-lbl"><div class="arr"></div><br><p>Участник СРТ потребляет «ток вычислений» через API</p></div>

    <div class="tl-node" data-id="cloudfarm">
      <div class="tl-img" onclick="openM('cloudfarm')">
        <span class="tl-badge infra">2020-е</span>
        <img class="infra" src="img/cloudfarm.jpg" alt="Облачные фермы" loading="lazy">
        <span class="tl-cat infra">ИНФРАСТРУКТУРА</span>
      </div>
      <div class="tl-dot infra"></div>
      <div class="tl-info">
        <h3 class="infra">Облачные фермы</h3>
        <p class="author">Azure, AWS, Google, 2020-е</p>
        <p class="fn infra">Кластеры 100 000+ GPU — современные «энергосети вычислений»</p>
        <p class="mg infra">Участник СРТ больше не владеет мощностями — потребляет «ток вычислений» через API</p>
      </div>
    </div>

  </div>
</div>

<!-- Narrative bridge: Chronology -> Three Programs -->
<div class="narrative-bridge">
  За 384 года технологической эволюции стоят не просто изобретения, а фундаментальные программы — каждая со своим пониманием того, что такое интеллект и где место машины.
</div>

<!-- === Section 1: Three Programs of AI === -->

<div class="section-hdr">
  <h2>Три программы ИИ</h2>
  <p>Каждая программа помещает мыслящую машину в разное место на Схеме МД</p>
</div>

<div class="programs-section">
  <div class="programs-intro">
    Не всё ново под луной. За технологической гонкой стоят три фундаментальные программы, каждая из которых опирается на своё понимание того, что такое интеллект. Теория&nbsp;&mdash; это &laquo;жёсткое ядро&raquo; программы: она определяет, какие задачи считаются важными и какие инженерные решения будут создаваться.
  </div>

  <div class="programs-grid">

    <!-- Card 1: Turing -->
    <div class="program-card" data-card="turing">
      <img class="program-card-img" src="img/prog_turing.jpg" alt="Программа Тьюринга" loading="lazy">
      <span class="program-icon">&gt;_</span>
      <div class="program-name">Программа Тьюринга</div>
      <div class="program-subtitle">ИМИТАТОР</div>
      <div class="program-brief">
        Может ли машина имитировать человека? Если две системы выдают одинаковый результат&nbsp;&mdash; их природа эквивалентна.
      </div>
      <div class="expand-hint">[ подробнее ]</div>
      <div class="program-detail">
        <ul>
          <li><strong>Жёсткое ядро:</strong> Алгоритмический подход. Ключевой фактор&nbsp;&mdash; действие. Если машина умеет действовать как человек&nbsp;&mdash; следовательно, умеет мыслить.</li>
          <li><strong>Гипотеза эквивалентности:</strong> Если две системы (человек и машина) выдают одинаковый результат на выходе, то их природа (мышление) эквивалентна.</li>
          <li><strong>Парадокс Тьюринга:</strong> Он разработал теорию, но сам не стремился реализовать &laquo;деятельностную&raquo; машину. Зато запустил коммуникативный подход&nbsp;&mdash; через Тест Тьюринга: если машина неотличима от человека в диалоге, она мыслит.</li>
          <li><strong>Предпосылка:</strong> Отбрасываем то, что невычислимо. Машина Тьюринга работает только с тем, что можно алгоритмизировать.</li>
        </ul>
        <div class="program-schema">Слой МД: Мыследействие (М-Д)</div>
        <div class="program-formula">Мышление = Действие. Если выдаёт правильный результат&nbsp;&mdash; значит, мыслит.</div>
      </div>
    </div>

    <!-- Card 2: Minsky -->
    <div class="program-card" data-card="minsky">
      <img class="program-card-img" src="img/prog_minsky.jpg" alt="Программа Минского" loading="lazy">
      <span class="program-icon">{...}</span>
      <div class="program-name">Программа Минского</div>
      <div class="program-subtitle">ОБЩЕСТВО РАЗУМА</div>
      <div class="program-brief">
        Разум&nbsp;&mdash; это &laquo;общество&raquo; из множества глупых агентов. Разумным является только их взаимодействие.
      </div>
      <div class="expand-hint">[ подробнее ]</div>
      <div class="program-detail">
        <ul>
          <li><strong>Жёсткое ядро:</strong> Символьный ИИ. Мышление&nbsp;&mdash; это работа со структурами данных и смыслами. Цель&nbsp;&mdash; моделирование внутренней архитектуры знаний и здравого смысла.</li>
          <li><strong>Society of Mind:</strong> Разум состоит из крошечных агентов, каждый из которых сам по себе глуп. Разумным является только их взаимодействие. Это не нейронная сеть, а система с явной архитектурой.</li>
          <li><strong>Теория фреймов:</strong> Фрейм&nbsp;&mdash; структура данных для представления стереотипной ситуации. Шахматы&nbsp;&mdash; легко. &laquo;Здравый смысл&raquo;&nbsp;&mdash; сложнейшая сеть из миллионов фреймов, которую крайне трудно формализовать.</li>
          <li><strong>Эмоции как режимы работы:</strong> Эмоции&nbsp;&mdash; не помеха мышлению, а &laquo;режимы работы&raquo;, которые включают одни группы агентов и выключают другие.</li>
        </ul>
        <div class="program-schema">Слой МД: Мышление (М)</div>
        <div class="program-formula">Мышление = Архитектура знаний. Не имитация ответов, а моделирование внутренней структуры.</div>
      </div>
    </div>

    <!-- Card 3: Engelbart -->
    <div class="program-card" data-card="engelbart">
      <img class="program-card-img" src="img/prog_engelbart.jpg" alt="Программа Энгельбарта" loading="lazy">
      <span class="program-icon">H+T</span>
      <div class="program-name">Программа Энгельбарта</div>
      <div class="program-subtitle">УСИЛИТЕЛЬ</div>
      <div class="program-brief">
        Не заменять человека машиной, а усилить человеческий интеллект. Машина&nbsp;&mdash; часть системы, которая делает человека умнее.
      </div>
      <div class="expand-hint">[ подробнее ]</div>
      <div class="program-detail">
        <ul>
          <li><strong>Жёсткое ядро:</strong> Аугментация. Не замена человека, а его усиление. Машина&nbsp;&mdash; лишь часть системы.</li>
          <li><strong>&laquo;Мать всех демо&raquo; (1968):</strong> Исторический показ: мышь, гипертекст, видеоконференция, коллаборативная работа&nbsp;&mdash; всё за одну демонстрацию.</li>
          <li><strong>Система H-LAM/T:</strong> Симбиоз пяти элементов&nbsp;&mdash; Human (Человек), Language (Язык), Artifacts (Артефакты/компьютер), Methodology (Методология), Training (Обучение). Машина&nbsp;&mdash; лишь один из пяти.</li>
          <li><strong>Три уровня деятельности:</strong> A.&nbsp;Business&nbsp;as&nbsp;usual&nbsp;&mdash; повседневные операции. B.&nbsp;Change&nbsp;&mdash; изменение процессов. C.&nbsp;Меняем то, как мы меняем&nbsp;&mdash; метаизменения.</li>
        </ul>
        <div class="program-schema">Слой МД: Мысле-коммуникация + Мыследействие (М-К + М-Д)</div>
        <div class="program-formula">Мышление = Человек + Инструмент. Один без другого неполон.</div>
      </div>
    </div>

  </div><!-- /programs-grid -->

  <!-- Contrast Table -->
  <div class="programs-contrast-wrap">
    <div class="programs-contrast-title">СРАВНЕНИЕ ПРОГРАММ</div>
    <table class="programs-table">
      <thead>
        <tr>
          <th></th>
          <th>Тьюринг</th>
          <th>Минский</th>
          <th>Энгельбарт</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Вопрос</td>
          <td>Может ли машина имитировать?</td>
          <td>Как устроен разум?</td>
          <td>Как усилить человека?</td>
        </tr>
        <tr>
          <td>Метод</td>
          <td>Алгоритм + Тест</td>
          <td>Агенты + Фреймы</td>
          <td>Человек + Инструмент</td>
        </tr>
        <tr>
          <td>Слой МД</td>
          <td>Мыследействие</td>
          <td>Мышление</td>
          <td>Мысле-коммуникация + Мыследействие</td>
        </tr>
        <tr>
          <td>Цель</td>
          <td>Замена</td>
          <td>Моделирование</td>
          <td>Усиление</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Closing Quote -->
  <div class="programs-quote">
    <p>Важно не столько конкретные персоналии, сколько разные типологические решения&nbsp;&mdash; куда программа помещает мыслящую машину. Процессы нейровосприятия&nbsp;&mdash; это как перья у птицы. Когда мы делаем самолёт, главным становится подъёмная сила. Точно так же мышление&nbsp;&mdash; это не его физическая реализация в мозгу, а культурный интерсубъективный процесс.</p>
    <div class="quote-src">Щедровицкий П. Г.</div>
  </div>

</div><!-- /programs-section -->

<!-- End Section 1 -->

<div class="section-hdr">
  <h2>Итоговая таблица СРТ</h2>
  <p>Система Разделения Труда: от механики к когнитивным архитектурам</p>
</div>
<div class="summary-wrap">
  <table class="summary-table">
    <thead><tr><th>Компонент</th><th>Слой</th><th>Функция</th><th>Значение для СРТ</th></tr></thead>
    <tbody>
<tr class="ep-row"><td colspan="4">ЭПОХА 1: Механика вычислений (1642 — 1840-е)</td></tr>
<tr><td>Паскалина (1642)</td><td><span class="badge-sm func">Функц.</span></td><td>Механизация переноса разряда при сложении</td><td>Мышление впервые отделяется от человека и воплощается в геометрии зубьев</td></tr>
<tr><td>Аналитическая машина (1830-е)</td><td><span class="badge-sm func">Функц.</span></td><td>Первое разделение хранения данных (Склад) и вычислений (Мельница)</td><td>Машина становится системой управления данными — архитектура CPU + Память</td></tr>
<tr><td>Перфокарта Лавлейс (1840-е)</td><td><span class="badge-sm func">Функц.</span></td><td>Кодирование алгоритмических команд: циклы и переходы</td><td>Символьный скачок — машина работает не с цифрами, а с символами по правилам логики</td></tr>
<tr class="ep-row"><td colspan="4">ЭПОХА 2: Электрическая эра (кон. XIX в. — 1920-е)</td></tr>
<tr><td>Концевые меры и микрометр (кон. XIX в.)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Стандарты точности до микрона — взаимозаменяемые детали</td><td>Каждая деталь Бэббиджа была уникальной. Теперь можно собирать машины из стандартных частей</td></tr>
<tr><td>Электромеханическое реле (1889)</td><td><span class="badge-sm func">Функц.</span></td><td>Автоматическая коммутация без участия человека</td><td>Физическое воплощение логического выбора — материальное ДА или НЕТ</td></tr>
<tr><td>Осциллограф (1897)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Визуализация формы электрического сигнала</td><td>«Глаза» инженера — без него вы не видите, что происходит внутри провода</td></tr>
<tr><td>Вакуумный насос (нач. XX в.)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Глубокий вакуум + сверхчистые металлы (99.99%)</td><td>Без вакуума и чистого вольфрама лампа не работает. Путь к кремнию и полупроводникам</td></tr>
<tr><td>Вакуумный триод (1906)</td><td><span class="badge-sm func">Функц.</span></td><td>Управление потоком электронов в вакууме</td><td>Безынерционное реле — переключение 0/1 в миллионы раз быстрее механики</td></tr>
<tr><td>Энергосеть (1920-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Стабильный ток 24/7 для тысяч вакуумных ламп</td><td>Без стабильной энергосети компьютер постоянно забывал бы результаты из-за скачков напряжения</td></tr>
<tr><td>Мультиметр (1920-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Мгновенная проверка каждой из 18 000 ламп ЭНИАКа</td><td>Без инструментов поиска «битого» узла система из тысяч элементов нежизнеспособна</td></tr>
<tr class="ep-row"><td colspan="4">ЭПОХА 3: Математическое основание (1938 — 1943)</td></tr>
<tr><td>Схемы Шеннона (1938)</td><td><span class="badge-sm func">Функц.</span></td><td>Доказательство: булева логика = электрические цепи</td><td>Математика получила электронное тело</td></tr>
<tr><td>Математический нейрон (1943)</td><td><span class="badge-sm func">Функц.</span></td><td>Моделирование клетки мозга через сеть логических реле</td><td>Мышление — не одна формула, а результат работы сети простых переключателей</td></tr>
<tr class="ep-row"><td colspan="4">ЭПОХА 4: Полупроводниковая революция (1960-е — 1986)</td></tr>
<tr><td>Компиляторы и ЯВУ (1960-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Отделение математики нейросетей от железа. Описание архитектуры кодом, не регистрами</td><td>Математика абстрагировалась от машины — можно думать на языке задачи, а не процессора</td></tr>
<tr><td>Фотолитография (1970-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Печать миллионов транзисторов на одном кристалле через длину волны света</td><td>Если для Бэббиджа пределом был микрометр, то здесь предел — длина волны света</td></tr>
<tr><td>Backpropagation (1986)</td><td><span class="badge-sm func">Функц.</span></td><td>Цепное правило для поиска градиента ошибки через все слои сети</td><td>Один нейрон не решает XOR. Backprop позволил обучать неограниченное количество слоёв</td></tr>
<tr class="ep-row"><td colspan="4">ЭПОХА 5: Параллелизм и геометрия (1998 — 2012)</td></tr>
<tr><td>Свёртка (CNN) (1998)</td><td><span class="badge-sm func">Функц.</span></td><td>Операция свёртки (f*g)(t) — инвариантность к сдвигу через локальные ядра</td><td>Нейрон стал работать не со всей картинкой, а с локальными признаками</td></tr>
<tr><td>ReLU (~2010)</td><td><span class="badge-sm func">Функц.</span></td><td>f(x) = max(0, x) — замена сложных экспонент на простой перегиб</td><td>Убрал проблему затухающего градиента. Простота радикально ускорила вычисления</td></tr>
<tr><td>NVIDIA CUDA (2006)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Видеокарта как массивный параллельный калькулятор для линейной алгебры</td><td>«Инструмент измерения» нового типа — CUDA превратила GPU в суперкомпьютер для матриц</td></tr>
<tr><td>Интернет и Big Data (2000-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Создание среды данных — миллиарды изображений, текстов, взаимодействий</td><td>В 1920-х вакуумный насос создавал среду для электронов. Интернет создал среду для обучения</td></tr>
<tr class="ep-row"><td colspan="4">ЭПОХА 6: Эпоха внимания (2017 — 2026)</td></tr>
<tr><td>Self-Attention (2017)</td><td><span class="badge-sm func">Функц.</span></td><td>Attention(Q,K,V) = softmax(QK^T / sqrt(d_k)) V — отказ от последовательной обработки</td><td>Каждое слово видит каждое другое слово одновременно. Параллелизм на уровне математики</td></tr>
<tr><td>RLHF (2022)</td><td><span class="badge-sm func">Функц.</span></td><td>Обучение через обратную связь от человека — оптимизация «полезности», а не предсказания</td><td>Модель учится не просто предсказывать следующее слово, а быть полезной</td></tr>
<tr><td>HBM память (2010-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Сверхбыстрая стопка памяти — данные успевают долетать до ядер GPU</td><td>Более узкое место в СРТ, чем сами чипы. Без HBM вычислительная мощь бесполезна</td></tr>
<tr><td>Облачные фермы (2020-е)</td><td><span class="badge-sm infra">Обеспеч.</span></td><td>Кластеры 100 000+ GPU — современные «энергосети вычислений»</td><td>Участник СРТ больше не владеет мощностями — потребляет «ток вычислений» через API</td></tr>

    </tbody>
  </table>
</div>

<div class="section-hdr">
  <h2>Граф зависимостей</h2>
  <p>Верхний ряд — функциональные компоненты. Нижний — обеспечивающие.<br>
  6 эпох слева направо. Стрелки: «без чего было бы невозможно»</p>
</div>

<div class="graph-wrap">
  <div class="graph-box" id="gBox">
    <svg class="graph-svg" id="gSvg">
      <defs>
        <marker id="aGold" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <polygon points="0 0, 8 3, 0 6" fill="rgba(201,168,76,0.6)"/>
        </marker>
        <marker id="aBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <polygon points="0 0, 8 3, 0 6" fill="rgba(74,158,255,0.6)"/>
        </marker>
        <marker id="aMix" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <polygon points="0 0, 8 3, 0 6" fill="rgba(160,160,160,0.5)"/>
        </marker>
      </defs>
    </svg>
    <div class="row-label func">ФУНКЦИОНАЛЬНЫЕ</div>
    <div class="row-label infra">ОБЕСПЕЧИВАЮЩИЕ</div>
    <div class="row-sep"></div>
    <div class="row-sep-label">— невидимый фундамент —</div>
    <div class="epoch-col-label" style="left:2%">Эпоха 1: 1642 — 1840-е</div>
    <div class="epoch-col-label" style="left:14%">Эпоха 2: кон. XIX в. — 1920-е</div>
    <div class="epoch-col-sep" style="left:12%"></div>
    <div class="epoch-col-label" style="left:30%">Эпоха 3: 1938 — 1943</div>
    <div class="epoch-col-sep" style="left:28%"></div>
    <div class="epoch-col-label" style="left:42%">Эпоха 4: 1960-е — 1986</div>
    <div class="epoch-col-sep" style="left:40%"></div>
    <div class="epoch-col-label" style="left:56%">Эпоха 5: 1998 — 2012</div>
    <div class="epoch-col-sep" style="left:54%"></div>
    <div class="epoch-col-label" style="left:74%">Эпоха 6: 2017 — 2026</div>
    <div class="epoch-col-sep" style="left:72%"></div>

    <div class="gn" id="gn-pascaline" style="left:2%;top:5%" onclick="openM('pascaline')">
      <img class="func" src="img/pascaline.jpg" alt="Паскалина">
      <div class="gn-t func">Паскалина</div>
      <div class="gn-y">1642</div>
    </div>

    <div class="gn" id="gn-engine" style="left:2%;top:18%" onclick="openM('engine')">
      <img class="func" src="img/engine.jpg" alt="Аналитическая машина">
      <div class="gn-t func">Аналитическая машина</div>
      <div class="gn-y">1830-е</div>
    </div>

    <div class="gn" id="gn-punchcard" style="left:2%;top:31%" onclick="openM('punchcard')">
      <img class="func" src="img/punchcard.jpg" alt="Перфокарта Лавлейс">
      <div class="gn-t func">Перфокарта Лавлейс</div>
      <div class="gn-y">1840-е</div>
    </div>

    <div class="gn" id="gn-gauge" style="left:14%;top:58%" onclick="openM('gauge')">
      <img class="infra" src="img/gauge.jpg" alt="Концевые меры и микрометр">
      <div class="gn-t infra">Концевые меры и микрометр</div>
      <div class="gn-y">кон. XIX в.</div>
    </div>

    <div class="gn" id="gn-relay" style="left:14%;top:5%" onclick="openM('relay')">
      <img class="func" src="img/relay.jpg" alt="Электромеханическое реле">
      <div class="gn-t func">Электромеханическое реле</div>
      <div class="gn-y">1889</div>
    </div>

    <div class="gn" id="gn-oscilloscope" style="left:14%;top:71%" onclick="openM('oscilloscope')">
      <img class="infra" src="img/oscilloscope.jpg" alt="Осциллограф">
      <div class="gn-t infra">Осциллограф</div>
      <div class="gn-y">1897</div>
    </div>

    <div class="gn" id="gn-vacuum_pump" style="left:22%;top:58%" onclick="openM('vacuum_pump')">
      <img class="infra" src="img/vacuum_pump.jpg" alt="Вакуумный насос">
      <div class="gn-t infra">Вакуумный насос</div>
      <div class="gn-y">нач. XX в.</div>
    </div>

    <div class="gn" id="gn-triode" style="left:22%;top:5%" onclick="openM('triode')">
      <img class="func" src="img/triode.jpg" alt="Вакуумный триод">
      <div class="gn-t func">Вакуумный триод</div>
      <div class="gn-y">1906</div>
    </div>

    <div class="gn" id="gn-powergrid" style="left:22%;top:71%" onclick="openM('powergrid')">
      <img class="infra" src="img/powergrid.jpg" alt="Энергосеть">
      <div class="gn-t infra">Энергосеть</div>
      <div class="gn-y">1920-е</div>
    </div>

    <div class="gn" id="gn-multimeter" style="left:30%;top:58%" onclick="openM('multimeter')">
      <img class="infra" src="img/multimeter.jpg" alt="Мультиметр">
      <div class="gn-t infra">Мультиметр</div>
      <div class="gn-y">1920-е</div>
    </div>

    <div class="gn" id="gn-shannon" style="left:30%;top:5%" onclick="openM('shannon')">
      <img class="func" src="img/shannon.jpg" alt="Схемы Шеннона">
      <div class="gn-t func">Схемы Шеннона</div>
      <div class="gn-y">1938</div>
    </div>

    <div class="gn" id="gn-neuron" style="left:38%;top:18%" onclick="openM('neuron')">
      <img class="func" src="img/neuron.jpg" alt="Математический нейрон">
      <div class="gn-t func">Математический нейрон</div>
      <div class="gn-y">1943</div>
    </div>

    <div class="gn" id="gn-compiler" style="left:42%;top:58%" onclick="openM('compiler')">
      <img class="infra" src="img/compiler.jpg" alt="Компиляторы и ЯВУ">
      <div class="gn-t infra">Компиляторы и ЯВУ</div>
      <div class="gn-y">1960-е</div>
    </div>

    <div class="gn" id="gn-photolithography" style="left:42%;top:71%" onclick="openM('photolithography')">
      <img class="infra" src="img/photolithography.jpg" alt="Фотолитография">
      <div class="gn-t infra">Фотолитография</div>
      <div class="gn-y">1970-е</div>
    </div>

    <div class="gn" id="gn-backprop" style="left:50%;top:5%" onclick="openM('backprop')">
      <img class="func" src="img/backprop.jpg" alt="Backpropagation">
      <div class="gn-t func">Backpropagation</div>
      <div class="gn-y">1986</div>
    </div>

    <div class="gn" id="gn-cnn" style="left:56%;top:5%" onclick="openM('cnn')">
      <img class="func" src="img/cnn.jpg" alt="Свёртка (CNN)">
      <div class="gn-t func">Свёртка (CNN)</div>
      <div class="gn-y">1998</div>
    </div>

    <div class="gn" id="gn-relu" style="left:56%;top:18%" onclick="openM('relu')">
      <img class="func" src="img/relu.jpg" alt="ReLU">
      <div class="gn-t func">ReLU</div>
      <div class="gn-y">~2010</div>
    </div>

    <div class="gn" id="gn-cuda" style="left:64%;top:58%" onclick="openM('cuda')">
      <img class="infra" src="img/cuda.jpg" alt="NVIDIA CUDA">
      <div class="gn-t infra">NVIDIA CUDA</div>
      <div class="gn-y">2006</div>
    </div>

    <div class="gn" id="gn-bigdata" style="left:64%;top:71%" onclick="openM('bigdata')">
      <img class="infra" src="img/bigdata.jpg" alt="Интернет и Big Data">
      <div class="gn-t infra">Интернет и Big Data</div>
      <div class="gn-y">2000-е</div>
    </div>

    <div class="gn" id="gn-attention" style="left:74%;top:5%" onclick="openM('attention')">
      <img class="func" src="img/attention.jpg" alt="Self-Attention">
      <div class="gn-t func">Self-Attention</div>
      <div class="gn-y">2017</div>
    </div>

    <div class="gn" id="gn-rlhf" style="left:74%;top:18%" onclick="openM('rlhf')">
      <img class="func" src="img/rlhf.jpg" alt="RLHF">
      <div class="gn-t func">RLHF</div>
      <div class="gn-y">2022</div>
    </div>

    <div class="gn" id="gn-hbm" style="left:82%;top:58%" onclick="openM('hbm')">
      <img class="infra" src="img/hbm.jpg" alt="HBM память">
      <div class="gn-t infra">HBM память</div>
      <div class="gn-y">2010-е</div>
    </div>

    <div class="gn" id="gn-cloudfarm" style="left:82%;top:71%" onclick="openM('cloudfarm')">
      <img class="infra" src="img/cloudfarm.jpg" alt="Облачные фермы">
      <div class="gn-t infra">Облачные фермы</div>
      <div class="gn-y">2020-е</div>
    </div>

  </div>
  <div class="graph-legend">
    <div class="gl-item"><div class="gl-dot" style="background:var(--gold)"></div><span style="color:var(--gold)">Функциональные (12)</span></div>
    <div class="gl-item"><div class="gl-dot" style="background:var(--blue)"></div><span style="color:var(--blue)">Обеспечивающие (11)</span></div>
  </div>
</div>

<!-- Narrative bridge: Graph -> MD Scheme -->
<div class="narrative-bridge">
  Граф зависимостей показал связи между компонентами. Но на каком уровне человеческой деятельности работает каждый из них? Щедровицкий предлагает рамку из трёх слоёв мыследеятельности.
</div>

<!-- === Section 5: Scheme of Mental Activity === -->

<div class="section-hdr" style="padding-top:5rem;">
  <h2>Схема мыследеятельности</h2>
  <p>Рамка Щедровицкого: какой слой человеческой деятельности автоматизирует каждая технология ИИ</p>
</div>

<div class="md-wrap">

  <div class="md-intro">
    <p>
      Щедровицкий предлагает декомпозировать вопрос <strong style="color:var(--gold);">«Может ли машина мыслить?»</strong> на три самостоятельных вопроса — по числу слоёв мыследеятельности. Каждый слой — это отдельный тип интеллектуальной работы. Каждая программа ИИ автоматизирует свой слой, и прогресс в одном не гарантирует прогресс в другом.
    </p>
    <img src="img/md_scheme.jpg" alt="Трёхслойная схема мыследеятельности Щедровицкого" class="md-hero-img">
  </div>

  <!-- Vertical arrows labels -->
  <div class="md-diagram">
    <div class="md-arrows-left">
      <span class="md-arrow-label">Рефлексия&nbsp;&uarr;</span>
    </div>

    <div class="md-layers">

      <!-- Layer M: Thinking -->
      <div class="md-layer md-thinking" data-md-layer>
        <div class="md-layer-label">М</div>
        <div class="md-layer-body">
          <div class="md-layer-title">Чистое мышление</div>
          <p class="md-layer-def">Рефлексия, абстракция, построение идеальных объектов. Мыслитель смотрит не на мир, а на средства мышления о мире.</p>
          <div class="md-layer-program">
            <span class="md-program-tag">Программа ИИ:</span>
            Энгельбарт &mdash; не замена, а усиление
          </div>
          <div class="md-layer-status">ИИ только подступает к этому слою</div>
        </div>
        <div class="md-layer-tech">
          <span class="md-badge md-badge-gold">RLHF <span class="md-partial">(частично)</span></span>
          <span class="md-badge md-badge-gold">Reasoning-модели</span>
        </div>
      </div>

      <!-- Layer M-K: Communication -->
      <div class="md-layer md-comm" data-md-layer>
        <div class="md-layer-label">К</div>
        <div class="md-layer-body">
          <div class="md-layer-title">Мысль-коммуникация</div>
          <p class="md-layer-def">Обмен текстами и знаками. Координация коллективного действия.</p>
          <div class="md-layer-program">
            <span class="md-program-tag">Программа ИИ:</span>
            Минский &mdash; «общество разума», фреймы, онтологии
          </div>
          <div class="md-layer-status">Здесь работают современные LLM</div>
        </div>
        <div class="md-layer-tech">
          <span class="md-badge md-badge-purple">Схемы Шеннона</span>
          <span class="md-badge md-badge-purple">Self-Attention</span>
          <span class="md-badge md-badge-purple">LLM</span>
        </div>
      </div>

      <!-- Layer mD: Action -->
      <div class="md-layer md-action" data-md-layer>
        <div class="md-layer-label">мД</div>
        <div class="md-layer-body">
          <div class="md-layer-title">Мыследействие</div>
          <p class="md-layer-def">Практическое действие с объектами. Преобразование материального мира.</p>
          <div class="md-layer-program">
            <span class="md-program-tag">Программа ИИ:</span>
            Тьюринг &mdash; если машина умеет действовать, значит «мыслит»
          </div>
          <div class="md-layer-status">Первое что было автоматизировано</div>
        </div>
        <div class="md-layer-tech">
          <span class="md-badge md-badge-blue">Паскалина</span>
          <span class="md-badge md-badge-blue">Перфокарта</span>
          <span class="md-badge md-badge-blue">Реле</span>
          <span class="md-badge md-badge-blue">Backprop</span>
          <span class="md-badge md-badge-blue">CNN</span>
          <span class="md-badge md-badge-blue">ReLU</span>
        </div>
      </div>

    </div>

    <div class="md-arrows-right">
      <span class="md-arrow-label">Понимание&nbsp;&darr;</span>
    </div>
  </div>

  <!-- Quote -->
  <div class="md-quote">
    <p>&laquo;Процессы нейровосприятия &mdash; это как перья у птицы: птица летит не потому, что у неё перья, а потому что у неё крылья. Перья &mdash; это другой уровень организации. Точно так же нейронные процессы &mdash; это один уровень, а мышление &mdash; совсем другой.&raquo;</p>
    <div class="md-quote-src">П. Г. Щедровицкий</div>
  </div>

  <!-- Conclusion -->
  <div class="md-conclusion">
    <p>ИИ поднимается по слоям снизу вверх: <strong style="color:var(--blue);">действия</strong> &rarr; <strong style="color:#a078c8;">коммуникация</strong> &rarr; <strong style="color:var(--gold);">мышление</strong>. Каждый следующий слой требует качественно иного подхода к автоматизации.</p>
  </div>

</div>

<!-- End Section 5 -->

<div class="section-hdr" style="padding-top:5rem;">
  <h2>Ограничения развития СРТ ИИ</h2>
  <p>Почему прогресс в одном слое не гарантирует прогресс системы в целом</p>
</div>

<div class="limits-wrap">

<div style="max-width:900px; margin:0 auto 3rem; line-height:1.8;">
  <p style="font-size:1.3rem; color:var(--text); margin-bottom:1.2rem;">
    Щедровицкий показывает ключевое свойство СРТ: <strong style="color:var(--gold)">слои не независимы</strong>. Каждый компонент — функциональный или обеспечивающий — существует в сети взаимных зависимостей. Решение проблемы в одном слое неизбежно создаёт нагрузку на другие.
  </p>

  <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:1.5rem; margin:2rem 0;">
    <div style="padding:1.2rem; border-radius:10px; background:rgba(201,168,76,0.06); border:1px solid rgba(201,168,76,0.15);">
      <div style="font-family:'JetBrains Mono',monospace; font-size:0.85rem; color:var(--gold-dim); letter-spacing:0.1em; margin-bottom:0.5rem;">ОГРАНИЧЕНИЕ</div>
      <p style="font-size:1.15rem; color:var(--text);">Узкое место в текущей конфигурации СРТ — физический, алгоритмический или инфраструктурный барьер, который не даёт системе масштабироваться.</p>
    </div>
    <div style="padding:1.2rem; border-radius:10px; background:rgba(74,158,255,0.06); border:1px solid rgba(74,158,255,0.15);">
      <div style="font-family:'JetBrains Mono',monospace; font-size:0.85rem; color:var(--blue-dim); letter-spacing:0.1em; margin-bottom:0.5rem;">РАЗРЕШЕНИЕ</div>
      <p style="font-size:1.15rem; color:var(--text);">Инженерное решение, которое снимает барьер: новый материал, новая архитектура чипа, новый алгоритм или новая организационная модель.</p>
    </div>
    <div style="padding:1.2rem; border-radius:10px; background:rgba(232,164,76,0.06); border:1px solid rgba(232,164,76,0.15);">
      <div style="font-family:'JetBrains Mono',monospace; font-size:0.85rem; color:#e8a44c; letter-spacing:0.1em; margin-bottom:0.5rem;">ПОБОЧНЫЙ ЭФФЕКТ</div>
      <p style="font-size:1.15rem; color:var(--text);">Каждое разрешение перераспределяет нагрузку на смежные слои СРТ — создаёт новые узкие места, которые потребуют собственных разрешений.</p>
    </div>
  </div>

  <p style="font-size:1.2rem; color:var(--text-dim); font-style:italic; margin-top:1rem;">
    Это и есть механизм эволюции СРТ: не линейный прогресс, а цепная реакция ограничений и разрешений, где каждый прорыв порождает следующий вызов.
  </p>
</div>

<!-- === Section 3: Weak Link Principle === -->

<div class="weaklink-intro">
  <h3>Принцип слабого звена</h3>
  <p class="wl-subtitle">
    По Щедровицкому, машина появляется там, где обнаруживается «слабое звено» —
    функциональное место, которое человек занимает неэффективно.
    Каждое разрешение порождает новое ограничение, запуская цепную реакцию СРТ.
  </p>
  <img class="wl-hero-img" src="img/chain-reaction.jpg" alt="Цепная реакция слабых звеньев в СРТ">
</div>

<div class="chain-wrap">

  <!-- Chain 1: Babbage -> Precision -> Relay -> Triode -->
  <div class="chain-example" data-chain="1">
    <div class="chain-title">Цепочка I — От замысла к электронике</div>
    <div class="chain-row">
      <div class="chain-node weak-link" onclick="openM('engine')">
        <img src="img/engine.jpg" alt="Аналитическая машина">
        <div class="cn-label">Бэббидж<br>1830-е</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node" onclick="openM('gauge')">
        <img src="img/gauge.jpg" class="infra" alt="Концевые меры">
        <div class="cn-label">Концевые меры<br>кон. XIX в.</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">новое</span>
      </div>
      <div class="chain-node" onclick="openM('relay')">
        <img src="img/relay.jpg" alt="Реле">
        <div class="cn-label">Реле<br>1889</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node new-constraint" onclick="openM('triode')">
        <img src="img/triode.jpg" alt="Триод">
        <div class="cn-label">Триод<br>1906</div>
      </div>
    </div>
    <div class="chain-explain">
      <div class="chain-explain-item weak">
        <div class="ce-tag">Слабое звено</div>
        Точность производства деталей не позволяла реализовать Аналитическую машину Бэббиджа — каждая деталь была уникальной.
      </div>
      <div class="chain-explain-item answer">
        <div class="ce-tag">Ответ</div>
        Стандарты точности до микрона (Иогансон): взаимозаменяемые детали сделали возможным массовое производство машин.
      </div>
      <div class="chain-explain-item next">
        <div class="ce-tag">Новое ограничение</div>
        Электромеханические реле инерционны, громоздки, ненадёжны при масштабировании — нужна безынерционная электроника (триод).
      </div>
    </div>
  </div>

  <!-- Chain 2: Neuron -> Backprop -> CUDA -> HBM -->
  <div class="chain-example" data-chain="2">
    <div class="chain-title">Цепочка II — От нейрона к параллельным вычислениям</div>
    <div class="chain-row">
      <div class="chain-node weak-link" onclick="openM('neuron')">
        <img src="img/neuron.jpg" alt="Математический нейрон">
        <div class="cn-label">Нейрон<br>1943</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node" onclick="openM('backprop')">
        <img src="img/backprop.jpg" alt="Backpropagation">
        <div class="cn-label">Backprop<br>1986</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">новое</span>
      </div>
      <div class="chain-node" onclick="openM('cuda')">
        <img src="img/cuda.jpg" class="infra" alt="NVIDIA CUDA">
        <div class="cn-label">CUDA<br>2006</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node new-constraint" onclick="openM('hbm')">
        <img src="img/hbm.jpg" class="infra" alt="HBM">
        <div class="cn-label">HBM<br>2010-е</div>
      </div>
    </div>
    <div class="chain-explain">
      <div class="chain-explain-item weak">
        <div class="ce-tag">Слабое звено</div>
        Один нейрон не решает XOR — доказано Минским в 1969 г. Наступила «зима ИИ»: однослойные сети не способны к сложному обучению.
      </div>
      <div class="chain-explain-item answer">
        <div class="ce-tag">Ответ</div>
        Backpropagation — обучение многослойных сетей через обратное распространение ошибки. Математическая основа «второй Большой Штуки».
      </div>
      <div class="chain-explain-item next">
        <div class="ce-tag">Новое ограничение</div>
        Колоссальные вычисления для глубоких сетей — CPU не справляются. Нужны GPU и быстрая память (HBM) для матричных операций.
      </div>
    </div>
  </div>

  <!-- Chain 3: Shannon -> Big Data -> Attention -> Cloud Farms -->
  <div class="chain-example" data-chain="3">
    <div class="chain-title">Цепочка III — От теории информации к облачным фермам</div>
    <div class="chain-row">
      <div class="chain-node weak-link" onclick="openM('shannon')">
        <img src="img/shannon.jpg" alt="Схемы Шеннона">
        <div class="cn-label">Шеннон<br>1938</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node" onclick="openM('bigdata')">
        <img src="img/bigdata.jpg" class="infra" alt="Big Data">
        <div class="cn-label">Big Data<br>2000-е</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">новое</span>
      </div>
      <div class="chain-node" onclick="openM('attention')">
        <img src="img/attention.jpg" alt="Self-Attention">
        <div class="cn-label">Attention<br>2017</div>
      </div>
      <div class="chain-arrow">
        <span class="chain-arrow-label">расшивка</span>
      </div>
      <div class="chain-node new-constraint" onclick="openM('cloudfarm')">
        <img src="img/cloudfarm.jpg" class="infra" alt="Облачные фермы">
        <div class="cn-label">Облачные фермы<br>2020-е</div>
      </div>
    </div>
    <div class="chain-explain">
      <div class="chain-explain-item weak">
        <div class="ce-tag">Слабое звено</div>
        Канал связи имеет физический предел пропускной способности. Данных больше, чем можно обработать последовательными методами.
      </div>
      <div class="chain-explain-item answer">
        <div class="ce-tag">Ответ</div>
        Теория информации дала «бит» и умное кодирование. Интернет и Big Data сделали доступными терабайты обучающих данных.
      </div>
      <div class="chain-explain-item next">
        <div class="ce-tag">Новое ограничение</div>
        Потоки данных огромной плотности: RNN не масштабируются. Self-Attention решает это, но требует ~25 000 GPU и $500M+ на кластер.
      </div>
    </div>
  </div>

</div>

<p class="weaklink-bridge">
  Эти три цепочки — частные случаи общего закона: каждое «слабое звено» СРТ
  порождает новый компонент, который создаёт новые ограничения на смежных слоях.
  В таблице ниже — полная картина этих взаимозависимостей.
</p>

<!-- End Section 3 -->

<table class="limits-table">
<thead>
<tr><th>Ограничение</th><th>Разрешение</th><th>Влияние на другие слои</th></tr>
</thead>
<tbody>
<tr>
  <td>Пропускная способность памяти (архитектура фон Неймана) и алгоритмы глубокого обучения</td>
  <td>Разработка чипов для параллельной обработки данных</td>
  <td>Ускорение работы алгоритмов, <span class="limits-warn">но увеличение нагрузки на инфраструктуру хранения данных</span></td>
</tr>
<tr>
  <td>Ограничение вычислительных мощностей и безопасность данных</td>
  <td>Увеличение вычислительных мощностей через новые чипы и дата-центры</td>
  <td>Большее тепловыделение и потребность в охлаждении, <span class="limits-warn">усиление необходимости в системах защиты данных</span></td>
</tr>
<tr>
  <td>Ограничения инфраструктуры и федеративное обучение</td>
  <td>Повышение пропускной способности сетей и улучшение сетевого оборудования</td>
  <td>Снижение нагрузки на центральные серверы, <span class="limits-warn">но увеличение инвестиций в сетевое оборудование и координацию устройств</span></td>
</tr>
<tr>
  <td>Ограничения в разработке специализированных чипов и тепловыделение</td>
  <td>Разработка энергоэффективных чипов (например, с графеновыми радиаторами)</td>
  <td>Снижение затрат на охлаждение, <span class="limits-warn">но временный рост расходов на разработку новых материалов</span></td>
</tr>
<tr>
  <td>Разрешение алгоритмов и нехватка специалистов</td>
  <td>Автоматизация процессов обучения и настройки ИИ</td>
  <td>Снижение нагрузки на специалистов, <span class="limits-warn">но возможный рост этических рисков</span></td>
</tr>
<tr>
  <td>Пропускная способность памяти и алгоритмы глубокого обучения</td>
  <td>Разработка чипов для параллельной обработки данных</td>
  <td>Ускорение алгоритмов, <span class="limits-warn">но увеличение нагрузки на память и хранилища</span></td>
</tr>
<tr>
  <td>Вычислительные мощности и безопасность данных</td>
  <td>Увеличение вычислительных мощностей за счёт новых чипов или дата-центров</td>
  <td>Рост тепловыделения и потребность в охлаждении, <span class="limits-warn">усложнение контроля безопасности</span></td>
</tr>
<tr>
  <td>Инфраструктура и федеративное обучение</td>
  <td>Повышение пропускной способности сетей и улучшение сетевого оборудования</td>
  <td>Уменьшение риска утечек данных, <span class="limits-warn">но увеличение инвестиций в оборудование</span></td>
</tr>
<tr>
  <td>Разработка специализированных чипов и тепловыделение</td>
  <td>Разработка энергоэффективных чипов с меньшим тепловыделением</td>
  <td><span class="limits-warn">Увеличение затрат на разработку новых материалов</span></td>
</tr>
<tr>
  <td>Алгоритмы и нехватка специалистов</td>
  <td>Автоматизация процессов обучения и настройки ИИ</td>
  <td>Снижение потребности в специалистах, <span class="limits-warn">но возможный рост этических рисков</span></td>
</tr>
</tbody>
</table>

<div style="max-width:900px; margin:2rem auto 0; padding:1.5rem 2rem; background:rgba(201,168,76,0.04); border:1px solid rgba(201,168,76,0.1); border-radius:10px;">
  <p style="font-size:1.2rem; color:var(--text); line-height:1.7; margin-bottom:0.8rem;">
    <strong style="color:var(--gold);">Вывод Щедровицкого:</strong> СРТ в области ИИ — это не последовательность изобретений, а <em>живая сеть взаимозависимостей</em>. Нельзя «просто» увеличить вычислительную мощность — это автоматически потребует нового охлаждения, новых материалов, новой инфраструктуры и новых специалистов.
  </p>
  <p style="font-size:1.1rem; color:var(--text-dim); line-height:1.7;">
    Именно поэтому прогресс ИИ определяется не гениальностью отдельного изобретателя, а зрелостью всей системы разделения труда — от литографии до энергосетей, от алгоритмов до этических стандартов.
  </p>
</div>

<p style="text-align:center; margin-top:2rem; font-style:italic; color:var(--text-dim); font-size:1.05rem;">Рис. 64. Взаимное влияние факторов ограничений развития СРТ ИИ — по П. Г. Щедровицкому</p>
</div>

<div class="footer">
  <p class="yr">1642 → 2026</p>
  <p>384 года эволюции — от латунных шестерней до когнитивных архитектур</p>
  <p class="st"><span style="color:var(--gold)">12</span> функциональных + <span style="color:var(--blue)">11</span> обеспечивающих = 23 компонента СРТ &middot; 5 концептуальных секций</p>
  <p style="margin-top:1rem;font-style:italic;font-size:0.8rem">По мотивам лекций П. Г. Щедровицкого о системе разделения труда</p>
</div>

<div class="modal" id="modal" onclick="closeM()">
  <div class="modal-inner" onclick="event.stopPropagation()">
    <img id="mImg" src="">
    <div class="modal-meta"><h3 id="mT"></h3><p id="mA"></p></div>
    <div class="modal-srt" id="mSrt" style="display:none"><div class="srt-label">ПО ЩЕДРОВИЦКОМУ:</div><div class="srt-text" id="mSrtText"></div></div>
  </div>
</div>

<script>
const meta={
"pascaline":{t:"Паскалина",a:"Блез Паскаль, 1642",l:"func",img:"img/pascaline.jpg",srt:"Щедровицкий подчёркивает: Паскалина (1642) — не просто калькулятор, а первый акт отделения вычислительной операции от человека. Именно здесь зарождается «система разделения труда» в создании умных машин: успех зависел от точности ремесленников, и Паскаль лично присутствовал при изготовлении деталей."},
"engine":{t:"Аналитическая машина",a:"Чарльз Бэббидж, 1830-е",l:"func",img:"img/engine.jpg",srt:"Аналитическая машина Бэббиджа — первое разделение «Склада» (памяти) и «Мельницы» (процессора). Щедровицкий отмечает: Бэббидж создал архитектуру, которую невозможно было реализовать при существующей СРТ — точность производства деталей была недостаточной. Это ключевой пример опережения замысла над возможностями производства."},
"punchcard":{t:"Перфокарта Лавлейс",a:"Ада Лавлейс, 1840-е",l:"func",img:"img/punchcard.jpg",srt:"Лавлейс совершила «символьный скачок»: определила операцию как управление любыми элементами, а не только числами. Щедровицкий акцентирует: она разделила программное и аппаратное обеспечение за 100 лет до появления этих терминов, увидев то, чего не видел Бэббидж — машина может манипулировать символами, частным случаем которых выступает число."},
"gauge":{t:"Концевые меры и микрометр",a:"К. Э. Иогансон, кон. XIX в.",l:"infra",img:"img/gauge.jpg",srt:"Щедровицкий рассматривает точность как ключевое условие машинизации. Без стандартов взаимозаменяемости деталей невозможен переход от штучного ремесла к массовому производству машин. Именно это ограничение делало машину Бэббиджа неосуществимой — каждая деталь была уникальной."},
"relay":{t:"Электромеханическое реле",a:"Элмон Строуджер, 1889",l:"func",img:"img/relay.jpg",srt:"Развитие телеграфных линий потребовало создания реле для передачи сигнала на любое расстояние. Щедровицкий показывает: реле, коммутатор, телеграф и телефон — продукты 100-летнего «большого перерыва» между замыслом Бэббиджа и его реализацией. Каждый из них замещал устойчивый модуль в СРТ."},
"oscilloscope":{t:"Осциллограф",a:"Карл Ф. Браун, 1897",l:"infra",img:"img/oscilloscope.jpg",srt:"Щедровицкий подчёркивает: измерительные приборы давали управляемость процесса производства и проверки качества — без них конструирование невозможно. Осциллографы позволили визуализировать электрические сигналы, что было критично для разработки компонентов вычислительных машин."},
"vacuum_pump":{t:"Вакуумный насос",a:"Химическая промышленность, нач. XX в.",l:"infra",img:"img/vacuum_pump.jpg",srt:"В логике СРТ вакуумные технологии — предпосылка электроники. Щедровицкий прослеживает линию от опытов Герике и Гюйгенса (XVII в.) через химическую промышленность к созданию среды, в которой возможна работа электронных ламп и в дальнейшем — полупроводников."},
"triode":{t:"Вакуумный триод",a:"Ли де Форест, 1906",l:"func",img:"img/triode.jpg",srt:"Вакуумная лампа заменила механические реле, обеспечив безынерционное переключение. Щедровицкий отмечает: транзисторы (наследники ламп) сделали возможными компактные и мощные компьютеры, обеспечив миниатюризацию и рост производительности. Это замещение целого класса позиций в СРТ."},
"powergrid":{t:"Энергосеть",a:"Индустриализация, 1920-е",l:"infra",img:"img/powergrid.jpg",srt:"Для устройств типа ENIAC (18 000 ламп) каждый сбой напряжения мог уничтожить результаты многодневных вычислений. Щедровицкий описывает: стабильное электроснабжение стало критически важным — General Electric обеспечила инфраструктуру, на которой выросла вся индустрия IT."},
"multimeter":{t:"Мультиметр",a:"Индустрия диагностики, 1920-е",l:"infra",img:"img/multimeter.jpg",srt:"Щедровицкий: измерительные приборы давали управляемость процесса и проверки качества. Без мгновенной диагностики каждого из тысяч компонентов система нежизнеспособна. Это обеспечивающий слой СРТ, без которого функциональный слой не может развиваться."},
"shannon":{t:"Схемы Шеннона",a:"Клод Шеннон, 1938",l:"func",img:"img/shannon.jpg",srt:"Шеннон заложил «ещё один кирпич в фундамент компьютерной эры», доказав что электрические схемы выполняют операции булевой логики. Щедровицкий подчёркивает: Мак-Каллок и Питтс утверждали, что нейронные цепи мозга делают то же, что электрические цепи Шеннона — а не наоборот."},
"neuron":{t:"Математический нейрон",a:"Мак-Каллок & Питтс, 1943",l:"func",img:"img/neuron.jpg",srt:"Щедровицкий: искусственные нейронные сети — это машины, имитирующие «системы разделения функций» в живых организмах. Мак-Каллок и Питтс не столько копировали мозг, сколько переносили складывающиеся представления о машинах на живую ткань. Нейрон — это телеграфное реле, применённое к физиологии."},
"compiler":{t:"Компиляторы и ЯВУ",a:"Грейс Хоппер, Деннис Ритчи, 1960-е",l:"infra",img:"img/compiler.jpg",srt:"Щедровицкий отмечает: Энгельбарт считал, что языки программирования станут настолько близки к естественным, что все начнут программировать. Компиляторы отделили математику от железа — можно описывать архитектуру на языке задачи, а не регистров процессора."},
"photolithography":{t:"Фотолитография",a:"ASML и предшественники, 1970-е",l:"infra",img:"img/photolithography.jpg",srt:"Литография — «реально узкое место» в СРТ ИИ. Щедровицкий подробно анализирует: ASML — единственный производитель EUV-машин стоимостью $200+ млн, производство одной занимает 18-24 месяца. В мире всего 300-400 таких машин. Любое изменение дизайна требует нескольких лет."},
"backprop":{t:"Backpropagation",a:"Хинтон, Румельхарт, Уильямс, 1986",l:"func",img:"img/backprop.jpg",srt:"Щедровицкий рассматривает появление GPU/TPU, метода обратного распространения ошибки и новых архитектур (трансформеры) как «новое качество технологий» глубокого обучения — вторую «Большую Штуку» после фон-неймановского компьютера. Backprop — математическая основа этой революции."},
"cnn":{t:"Свёртка (CNN)",a:"Ян ЛеКун, 1998",l:"func",img:"img/cnn.jpg",srt:"Свёрточные нейронные сети используют механизмы, аналогичные фреймам Мински — сжатые отсылки к типовым знаниям. Щедровицкий: CNN выделяет сначала простые закономерности (линии), затем обобщает их до сложных паттернов. AlexNet (2012) — первая сборка «второй Большой Штуки»."},
"relu":{t:"ReLU",a:"Нэйр, Хинтон, ~2010",l:"func",img:"img/relu.jpg",srt:"В контексте СРТ Щедровицкий описывает функцию активации как пороговую логику — принцип «всё или ничего», унаследованный от биологических нейронов Мак-Каллока и Питтса. ReLU — радикальное упрощение этого принципа, убравшее проблему затухающего градиента."},
"cuda":{t:"NVIDIA CUDA",a:"NVIDIA, 2006",l:"infra",img:"img/cuda.jpg",srt:"Щедровицкий выделяет GPU/TPU как специализированные «условно не-фон-неймановские» архитектуры, оптимизированные для глубокого обучения. Их появление — один из ключевых факторов, превративших глубокое обучение во «вторую Большую Штуку» в СРТ ИИ."},
"bigdata":{t:"Интернет и Big Data",a:"Web 2.0, 2000-е",l:"infra",img:"img/bigdata.jpg",srt:"Интернет как инфраструктура — сначала для обмена данными между людьми, затем для ИИ-обработки в реальном времени. Щедровицкий: облачные вычисления и ИИ-платформы как сервисы значительно снизили зависимость от локальных ресурсов у конечных пользователей."},
"attention":{t:"Self-Attention",a:"Васвани и др., 2017",l:"func",img:"img/attention.jpg",srt:"Трансформеры — часть «нового качества технологий» второй Большой Штуки. Щедровицкий: мы находимся на стадии «мануфактуризации мышления» — операции мышления ещё невыверены, как у ремесленника. Self-Attention — попытка автоматизировать то, как мышление «видит» все связи одновременно."},
"rlhf":{t:"RLHF",a:"OpenAI, Anthropic, 2022",l:"func",img:"img/rlhf.jpg",srt:"Обратная связь — центральный концепт в логике Щедровицкого. Он прослеживает её от SNARC Мински (1951) через кибернетику к современному RLHF. Принцип один: система корректирует поведение через feedback, укрепляя пути с меньшим сопротивлением."},
"hbm":{t:"HBM память",a:"SK Hynix, Samsung, 2010-е",l:"infra",img:"img/hbm.jpg",srt:"Щедровицкий: пропускная способность сетей — ограничивающий фактор для кластеров GPU. ~13% затрат на кластеры уходит на сетевое оборудование. HBM — тот же принцип на уровне чипа: без быстрой памяти вычислительная мощь бесполезна."},
"cloudfarm":{t:"Облачные фермы",a:"Azure, AWS, Google, 2020-е",l:"infra",img:"img/cloudfarm.jpg",srt:"Щедровицкий: для кластера GPT-4 нужны ~25 000 GPU A100, стоимость аренды — $500 млн за 2-3 года. К 2028 году ожидаются кластеры стоимостью $100+ млрд, потребляющие энергию, эквивалентную небольшому штату США. Участник СРТ потребляет «ток вычислений» через API."},
};
const edges=[
{f:"pascaline",t:"engine",e:"gold"},
{f:"engine",t:"punchcard",e:"gold"},
{f:"engine",t:"relay",e:"gold"},
{f:"relay",t:"triode",e:"gold"},
{f:"relay",t:"shannon",e:"gold"},
{f:"shannon",t:"neuron",e:"gold"},
{f:"engine",t:"gauge",e:"mix"},
{f:"relay",t:"oscilloscope",e:"mix"},
{f:"gauge",t:"relay",e:"mix"},
{f:"vacuum_pump",t:"triode",e:"mix"},
{f:"oscilloscope",t:"shannon",e:"mix"},
{f:"powergrid",t:"shannon",e:"mix"},
{f:"multimeter",t:"neuron",e:"mix"},
{f:"gauge",t:"vacuum_pump",e:"blue"},
{f:"oscilloscope",t:"powergrid",e:"blue"},
{f:"powergrid",t:"multimeter",e:"blue"},
{f:"neuron",t:"backprop",e:"gold"},
{f:"photolithography",t:"backprop",e:"mix"},
{f:"punchcard",t:"compiler",e:"mix"},
{f:"multimeter",t:"compiler",e:"blue"},
{f:"vacuum_pump",t:"photolithography",e:"blue"},
{f:"gauge",t:"photolithography",e:"blue"},
{f:"backprop",t:"cnn",e:"gold"},
{f:"backprop",t:"relu",e:"gold"},
{f:"cnn",t:"relu",e:"gold"},
{f:"photolithography",t:"cuda",e:"blue"},
{f:"compiler",t:"cuda",e:"blue"},
{f:"bigdata",t:"cnn",e:"mix"},
{f:"cuda",t:"cnn",e:"mix"},
{f:"relu",t:"attention",e:"gold"},
{f:"cnn",t:"attention",e:"gold"},
{f:"cuda",t:"attention",e:"mix"},
{f:"bigdata",t:"attention",e:"mix"},
{f:"attention",t:"rlhf",e:"gold"},
{f:"cuda",t:"hbm",e:"blue"},
{f:"cloudfarm",t:"rlhf",e:"mix"},
{f:"hbm",t:"attention",e:"mix"},
{f:"powergrid",t:"cloudfarm",e:"blue"},
{f:"cuda",t:"cloudfarm",e:"blue"},
];
function drawEdges(){
  const svg=document.getElementById('gSvg');
  const box=document.getElementById('gBox');
  const r=box.getBoundingClientRect();
  svg.querySelectorAll('line').forEach(l=>l.remove());
  edges.forEach(e=>{
    const f=document.getElementById('gn-'+e.f);
    const t=document.getElementById('gn-'+e.t);
    if(!f||!t)return;
    const fr=f.getBoundingClientRect(), tr=t.getBoundingClientRect();
    const x1=fr.left+fr.width/2-r.left, y1=fr.top+fr.height/2-r.top;
    const x2=tr.left+tr.width/2-r.left, y2=tr.top+tr.height/2-r.top;
    const l=document.createElementNS('http://www.w3.org/2000/svg','line');
    l.setAttribute('x1',x1);l.setAttribute('y1',y1);
    l.setAttribute('x2',x2);l.setAttribute('y2',y2);
    if(e.e==='gold'){
      l.setAttribute('stroke','rgba(201,168,76,0.35)');
      l.setAttribute('marker-end','url(#aGold)');
    } else if(e.e==='blue'){
      l.setAttribute('stroke','rgba(74,158,255,0.35)');
      l.setAttribute('marker-end','url(#aBlue)');
    } else {
      l.setAttribute('stroke','rgba(140,140,140,0.3)');
      l.setAttribute('stroke-dasharray','6,4');
      l.setAttribute('marker-end','url(#aMix)');
    }
    l.setAttribute('stroke-width','1.5');
    svg.appendChild(l);
  });
}
const obs=new IntersectionObserver(es=>{
  es.forEach(e=>{if(e.isIntersecting)e.target.classList.add('visible');});
},{threshold:0.1});
document.querySelectorAll('.tl-node').forEach(n=>obs.observe(n));
function openM(id){
  const m=meta[id];if(!m)return;
  document.getElementById('mImg').src=m.img;
  document.getElementById('mT').textContent=m.t;
  document.getElementById('mA').textContent=m.a;
  const srtEl=document.getElementById('mSrt');
  const srtText=document.getElementById('mSrtText');
  if(m.srt){srtText.textContent=m.srt;srtEl.style.display='block';}
  else{srtEl.style.display='none';}
  document.getElementById('modal').classList.add('on');
}
function closeM(){document.getElementById('modal').classList.remove('on');}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeM();});
window.addEventListener('load',()=>setTimeout(drawEdges,300));
window.addEventListener('resize',drawEdges);

/* ============================================================
   Section 2: Evolution stairs — cascade animation
   ============================================================ */
(function () {
  'use strict';
  var STAGGER_DELAY = 150;
  var observerOptions = { root: null, rootMargin: '0px 0px -60px 0px', threshold: 0.15 };
  var revealedCount = 0;

  function revealElement(entry) {
    var el = entry.target;
    if (el.classList.contains('visible')) return;
    var delay = revealedCount * STAGGER_DELAY;
    revealedCount++;
    el.style.transitionDelay = delay + 'ms';
    el.classList.add('visible');
    setTimeout(function () { el.style.transitionDelay = ''; }, delay + 800);
  }

  var stairObserver = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        revealElement(entry);
        stairObserver.unobserve(entry.target);
      }
    });
  }, observerOptions);

  function initStairObservers() {
    var stairs = document.querySelectorAll('.stair');
    var transitions = document.querySelectorAll('.stair-transition');
    var formula = document.querySelector('.evol-formula');
    var allElements = [];
    stairs.forEach(function (s) { allElements.push(s); });
    transitions.forEach(function (t) { allElements.push(t); });
    allElements.sort(function (a, b) {
      return parseFloat(a.getAttribute('data-step') || 999) - parseFloat(b.getAttribute('data-step') || 999);
    });
    allElements.forEach(function (el) { stairObserver.observe(el); });

    if (formula) {
      var formulaObserver = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) { entry.target.classList.add('visible'); formulaObserver.unobserve(entry.target); }
        });
      }, { root: null, rootMargin: '0px', threshold: 0.3 });
      formulaObserver.observe(formula);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initStairObservers);
  } else {
    initStairObservers();
  }
})();

/* ============================================================
   Section 4: Communication Chain — interactivity
   ============================================================ */
function toggleComm(el) {
  var node = el.closest('.comm-node');
  if (!node) return;
  node.classList.toggle('expanded');
}

(function initCommChainObserver() {
  var commObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.comm-node, .comm-arrow, .comm-thesis').forEach(function(el, i) {
    el.style.transitionDelay = (i * 0.12) + 's';
    commObs.observe(el);
  });
})();

/* ============================================================
   Section 1: Three Programs — expand/collapse & animation
   ============================================================ */
(function() {
  'use strict';

  document.querySelectorAll('.program-card').forEach(function(card) {
    card.addEventListener('click', function(e) {
      if (window.getSelection().toString().length > 0) return;
      document.querySelectorAll('.program-card.expanded').forEach(function(other) {
        if (other !== card) other.classList.remove('expanded');
      });
      card.classList.toggle('expanded');
    });
  });

  var programObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.program-card').forEach(function(card) {
    programObs.observe(card);
  });
})();

/* ============================================================
   Section 5: MD Layers cascade animation
   ============================================================ */
(function() {
  var mdObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('[data-md-layer]').forEach(function(layer) {
    mdObs.observe(layer);
  });
})();

/* ============================================================
   Section 3: Weak Link — chain animation
   ============================================================ */
(function() {
  var chainObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.chain-example').forEach(function(el) {
    chainObs.observe(el);
  });
})();

</script>
</body></html>